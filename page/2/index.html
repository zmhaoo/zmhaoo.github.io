<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<title>Zmhaoo&#39;s Blog</title>


<link rel="stylesheet" href="/styles/main.css">


    <meta name="generator" content="Hexo 6.1.0"></head>
    <body>
        <div class="container">
            <header>
<div class="main">
<div class="title">
    <a href="#" class="logo">Zmhaoo&#39;s Blog</a>
</div>
<div class="site-nav">
    <ul id="menu" class="menu">
    
        <li class="menu-item text-underline">
            <a href="/">Home</a>
        </li>
    
        <li class="menu-item text-underline">
            <a href="/archives">Archives</a>
        </li>
    
        <li class="menu-item text-underline">
            <a href="/about/">About</a>
        </li>
            
    </ul>
</div>
</div>
</header>
            <main class="main">
                <section class="posts clearfix">
    <div class="posts-wrapper">
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2022/05/08/HashMap%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/">HashMapæºç è§£æ</a>
            </div>
            <p class="sub">May 08 2022</p>
            <div class="post-content">
                
                    <h1 id="TreeifyBin"><a href="#TreeifyBin" class="headerlink" title="TreeifyBin"></a>TreeifyBin</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">treeifyBin</span><span class="params">(Node&lt;K, V&gt;[] tab, <span class="type">int</span> hash)</span> &#123;</span><br><span class="line">        <span class="comment">//n æ•°ç»„çš„é•¿åº¦ï¼Œindex æ•°ç»„ä½ç½®</span></span><br><span class="line">        <span class="type">int</span> n, index;</span><br><span class="line">        Node&lt;K, V&gt; e;</span><br><span class="line">        <span class="keyword">if</span> (tab == <span class="literal">null</span> || (n = tab.length) &lt; MIN_TREEIFY_CAPACITY) &#123;</span><br><span class="line">            <span class="comment">//å¦‚æœå½“å‰æ•°ç»„ä¸ºç©ºï¼Œæˆ–è€…å½“å‰æ•°ç»„å®¹é‡å°äºæœ€å°æ ‘åŒ–å®¹é‡</span></span><br><span class="line">            <span class="comment">//ç›´æ¥æ‰©å®¹ä¸è¿›è¡Œæ ‘åŒ–</span></span><br><span class="line">            resize();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((e = tab[index = (n - <span class="number">1</span>) &amp; hash]) != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">//å½“å½“å‰æ‰¾çš„èŠ‚ç‚¹eä¸ä¸ºç©º</span></span><br><span class="line">            <span class="comment">//hdçº¢é»‘æ ‘é“¾è¡¨å¤´ï¼Œçº¢é»‘æ ‘é“¾è¡¨å°¾ï¼ˆçº¢é»‘æ ‘ä¸­ä¸ä»…æœ‰ç»´æŠ¤å…¶æ‰€æœ‰èŠ‚ç‚¹çš„çº¢é»‘æ ‘ç»“æ„ï¼Œè¿˜æœ‰æ‰€æœ‰èŠ‚ç‚¹çš„é“¾è¡¨ç»“æ„ï¼‰</span></span><br><span class="line">            <span class="comment">//æ‰€ä»¥å…ˆå°†ç›®å‰èŠ‚ç‚¹æŒ‰é“¾è¡¨æ’åˆ—å¥½ï¼Œåœ¨è¿›è¡Œçº¢é»‘æ ‘åŒ–</span></span><br><span class="line">            TreeNode&lt;K, V&gt; hd = <span class="literal">null</span>, tl = <span class="literal">null</span>;</span><br><span class="line">            <span class="comment">//éå†åˆ—è¡¨</span></span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                <span class="comment">//å°†å½“å‰eèŠ‚ç‚¹è£…åŒ–ä¸ºTreeNode</span></span><br><span class="line">                TreeNode&lt;K, V&gt; p = replacementTreeNode(e, <span class="literal">null</span>);</span><br><span class="line">                <span class="comment">//å¦‚æœtlä¸å­˜åœ¨</span></span><br><span class="line">                <span class="keyword">if</span> (tl == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="comment">//åˆ™pä¸ºhd</span></span><br><span class="line">                    hd = p;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//è‹¥å­˜åœ¨åˆ™pçš„å‰èŠ‚ç‚¹æŒ‡å‘tl</span></span><br><span class="line">                    p.prev = tl;</span><br><span class="line">                    <span class="comment">//tlçš„åèŠ‚ç‚¹æŒ‡å‘p</span></span><br><span class="line">                    tl.next = p;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//æœ€åå°†tlæŒ‡å‘p</span></span><br><span class="line">                tl = p;</span><br><span class="line">            &#125; <span class="keyword">while</span> ((e = e.next) != <span class="literal">null</span>);</span><br><span class="line">            <span class="keyword">if</span> ((tab[index] = hd) != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">//å°†hdæ”¾åœ¨æ•°ç»„ä¸Šï¼Œä¸”hdå­˜åœ¨ï¼Œå°†é“¾è¡¨è¿›è¡Œçº¢é»‘æ ‘åŒ–</span></span><br><span class="line">                hd.treeify(tab);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h1 id="Treeify"><a href="#Treeify" class="headerlink" title="Treeify"></a>Treeify</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">treeify</span><span class="params">(Node&lt;K, V&gt;[] tab)</span> &#123;</span><br><span class="line">            TreeNode&lt;K, V&gt; root = <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">for</span> (TreeNode&lt;K, V&gt; x = <span class="built_in">this</span>, next; x != <span class="literal">null</span>; x = next) &#123;</span><br><span class="line">                <span class="comment">//æ ¹æ®é“¾è¡¨è¿›è¡Œéå†</span></span><br><span class="line">                next = (TreeNode&lt;K, V&gt;) x.next;</span><br><span class="line">                x.left = x.right = <span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="comment">//å¦‚æœæ ¹èŠ‚ç‚¹è¿˜æ²¡è®¾ç½®åˆ™å½“å‰èŠ‚ç‚¹è®¾ç½®ä¸ºæ ¹èŠ‚ç‚¹root</span></span><br><span class="line">                    x.parent = <span class="literal">null</span>;</span><br><span class="line">                    <span class="comment">//æ ¹èŠ‚ç‚¹ä¸€å®šæ˜¯é»‘è‰²çš„</span></span><br><span class="line">                    x.red = <span class="literal">false</span>;</span><br><span class="line">                    root = x;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//è·å–å½“å‰å¾ªç¯èŠ‚ç‚¹çš„keyå’Œå“ˆå¸Œå€¼</span></span><br><span class="line">                    <span class="type">K</span> <span class="variable">k</span> <span class="operator">=</span> x.key;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">h</span> <span class="operator">=</span> x.hash;</span><br><span class="line">                    Class&lt;?&gt; kc = <span class="literal">null</span>;</span><br><span class="line">                    <span class="comment">//æ¯æ¬¡éƒ½ä»æ ¹èŠ‚ç‚¹å¼€å§‹å¾ªç¯</span></span><br><span class="line">                    TreeNode&lt;K, V&gt; p = root;</span><br><span class="line">                    <span class="keyword">for</span> (; ; ) &#123;</span><br><span class="line">                        <span class="comment">//éå†å½“å‰çº¢é»‘æ ‘</span></span><br><span class="line">                        <span class="type">int</span> dir;</span><br><span class="line">                        <span class="comment">//è·å¾—pçš„hashå€¼å’Œkey</span></span><br><span class="line">                        <span class="type">int</span> <span class="variable">ph</span> <span class="operator">=</span> p.hash;</span><br><span class="line">                        <span class="type">K</span> <span class="variable">pk</span> <span class="operator">=</span> p.key;</span><br><span class="line">                        <span class="comment">//æ¯”è¾ƒhashå€¼ï¼Œç„¶åæ ¹æ®æ¯”è¾ƒå€¼dirå†³å®šæ’å…¥å·¦è¾¹è¿˜æ˜¯å³è¾¹</span></span><br><span class="line">                        <span class="keyword">if</span> (ph &gt; h) &#123;</span><br><span class="line">                            dir = -<span class="number">1</span>;</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ph &lt; h) &#123;</span><br><span class="line">                            dir = <span class="number">1</span>;</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((kc == <span class="literal">null</span> &amp;&amp; (kc = comparableClassFor(k)) == <span class="literal">null</span>) ||</span><br><span class="line">                                (dir = compareComparables(kc, k, pk)) == <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="comment">//kä¸æ˜¯ä¸æ˜¯è¯¾æ¯”è¾ƒç±»æˆ–è€…æ¯”è¾ƒç»“æœä¸º0ï¼Œä½¿ç”¨tieBreakOrderæ–¹æ³•æ¯”è¾ƒ</span></span><br><span class="line">                            dir = tieBreakOrder(k, pk);</span><br><span class="line">                        &#125;</span><br><span class="line">                        TreeNode&lt;K, V&gt; xp = p;</span><br><span class="line">                        p = (dir &lt;= <span class="number">0</span>) ? p.left : p.right;</span><br><span class="line">                        <span class="comment">//ä»…å½“å½“å‰è¦æ’å…¥çš„ä½ç½®ä¸Šæ²¡æœ‰èŠ‚ç‚¹æ—¶æ‰è¿›è¡Œæ’å…¥ï¼Œå¦åˆ™ç»§ç»­å‘ä¸‹éå†</span></span><br><span class="line">                        <span class="keyword">if</span> (p == <span class="literal">null</span>) &#123;</span><br><span class="line">                            <span class="comment">//è®¾ç½®çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">                            x.parent = xp;</span><br><span class="line">                            <span class="comment">//æ ¹æ®dirå€¼è®¾ç½®ä¸ºçˆ¶èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹</span></span><br><span class="line">                            <span class="keyword">if</span> (dir &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                                xp.left = x;</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                xp.right = x;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="comment">//æ’å…¥æˆåŠŸåå¹³è¡¡çº¢é»‘æ ‘</span></span><br><span class="line">                            root = balanceInsertion(root, x);</span><br><span class="line">                            <span class="comment">//è·³å‡ºå½“å‰å¾ªç¯</span></span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//ç¡®ä¿å½“å‰çš„rootæ˜¯ç›´æ¥è½åœ¨tableæ•°ç»„ä¸Šçš„</span></span><br><span class="line">            moveRootToFront(tab, root);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>


                
            </div>
        </article>
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2022/04/26/%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/">å¤–å–é¡¹ç›®é‡åˆ°çš„é—®é¢˜æ€»ç»“</a>
            </div>
            <p class="sub">Apr 26 2022</p>
            <div class="post-content">
                
                    <h1 id="æµè§ˆå™¨è¿”å›é¡µé¢ä¸æ•°æ®åº“idä¸ä¸€è‡´-jsä¸é›ªèŠ±ç®—æ³•çš„ç²¾åº¦ä¸¢å¤±é—®é¢˜"><a href="#æµè§ˆå™¨è¿”å›é¡µé¢ä¸æ•°æ®åº“idä¸ä¸€è‡´-jsä¸é›ªèŠ±ç®—æ³•çš„ç²¾åº¦ä¸¢å¤±é—®é¢˜" class="headerlink" title="æµè§ˆå™¨è¿”å›é¡µé¢ä¸æ•°æ®åº“idä¸ä¸€è‡´(jsä¸é›ªèŠ±ç®—æ³•çš„ç²¾åº¦ä¸¢å¤±é—®é¢˜)"></a>æµè§ˆå™¨è¿”å›é¡µé¢ä¸æ•°æ®åº“idä¸ä¸€è‡´(jsä¸é›ªèŠ±ç®—æ³•çš„ç²¾åº¦ä¸¢å¤±é—®é¢˜)</h1><p>é€šè¿‡è§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºçš„SQLå‘ç°é¡µé¢ä¼ é€’è¿‡æ¥çš„å‘˜å·¥idçš„å€¼å’Œæ•°æ®åº“ä¸­çš„idå€¼ä¸ä¸€è‡´ï¼Œè¿™æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿ<br>åˆ†é¡µæŸ¥è¯¢æ—¶æœåŠ¡ç«¯å“åº”ç»™é¡µé¢çš„æ•°æ®ä¸­idçš„å€¼ä¸º**19ä½æ•°å­—(mybatisplusæä¾›çš„é›ªèŠ±ç®—æ³•)**ï¼Œç±»å‹ä¸ºlong<img src="https://s1.ax1x.com/2022/04/27/LbRRr6.png" alt="LbRRr6.png"></p>
<p>é¡µé¢ä¸­<strong>jså¤„ç†longå‹æ•°å­—åªèƒ½ç²¾ç¡®åˆ°å‰16ä½</strong>ï¼Œæ‰€ä»¥æœ€ç»ˆé€šè¿‡ajaxè¯·æ±‚æäº¤ç»™æœåŠ¡ç«¯çš„æ—¶å€™idå˜ä¸º1391586184024604700</p>
<p><img src="https://s1.ax1x.com/2022/04/27/LbWSiQ.png" alt="LbWSiQ.png"></p>
<p>å‰é¢æˆ‘ä»¬å·²ç»å‘ç°äº†é—®é¢˜çš„åŸå› ï¼Œ<strong>å³jså¯¹longå‹æ•°æ®è¿›è¡Œå¤„ç†æ—¶ä¸¢å¤±ç²¾åº¦</strong>ï¼Œå¯¼è‡´æäº¤çš„idå’Œæ•°æ®åº“ä¸­çš„idä¸ä¸€è‡´ã€‚</p>
<p>å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ<br>æˆ‘ä»¬å¯ä»¥åœ¨æœåŠ¡ç«¯ç»™é¡µé¢å“åº”jsonæ•°æ®æ—¶è¿›è¡Œå¤„ç†ï¼Œå°†longå‹æ•°æ®ç»Ÿä¸€è½¬ä¸ºStringå­—ç¬¦ä¸²ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://s1.ax1x.com/2022/04/27/LbRvdS.png" alt="LbRvdS.png">å…·ä½“å®ç°æ­¥éª¤ï¼š<br>â‘ æä¾›å¯¹è±¡è½¬æ¢å™¨JacksonObjectMapperï¼ŒåŸºäºJacksonè¿›è¡ŒJavaå¯¹è±¡åˆ°jsonæ•°æ®çš„è½¬æ¢</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.common;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.DeserializationFeature;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.<span class="keyword">module</span>.SimpleModule;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ser.std.ToStringSerializer;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.datatype.jsr310.deser.LocalDateDeserializer;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.datatype.jsr310.deser.LocalDateTimeDeserializer;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.datatype.jsr310.deser.LocalTimeDeserializer;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.datatype.jsr310.ser.LocalDateSerializer;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.datatype.jsr310.ser.LocalDateTimeSerializer;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.datatype.jsr310.ser.LocalTimeSerializer;</span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalTime;</span><br><span class="line"><span class="keyword">import</span> java.time.format.DateTimeFormatter;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.fasterxml.jackson.databind.DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯¹è±¡æ˜ å°„å™¨:åŸºäºjacksonå°†Javaå¯¹è±¡è½¬ä¸ºjsonï¼Œæˆ–è€…å°†jsonè½¬ä¸ºJavaå¯¹è±¡</span></span><br><span class="line"><span class="comment"> * å°†JSONè§£æä¸ºJavaå¯¹è±¡çš„è¿‡ç¨‹ç§°ä¸º [ä»JSONååºåˆ—åŒ–Javaå¯¹è±¡]</span></span><br><span class="line"><span class="comment"> * ä»Javaå¯¹è±¡ç”ŸæˆJSONçš„è¿‡ç¨‹ç§°ä¸º [åºåˆ—åŒ–Javaå¯¹è±¡åˆ°JSON]</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JacksonObjectMapper</span> <span class="keyword">extends</span> <span class="title class_">ObjectMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEFAULT_DATE_FORMAT</span> <span class="operator">=</span> <span class="string">&quot;yyyy-MM-dd&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEFAULT_DATE_TIME_FORMAT</span> <span class="operator">=</span> <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEFAULT_TIME_FORMAT</span> <span class="operator">=</span> <span class="string">&quot;HH:mm:ss&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">JacksonObjectMapper</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="comment">//æ”¶åˆ°æœªçŸ¥å±æ€§æ—¶ä¸æŠ¥å¼‚å¸¸</span></span><br><span class="line">        <span class="built_in">this</span>.configure(FAIL_ON_UNKNOWN_PROPERTIES, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ååºåˆ—åŒ–æ—¶ï¼Œå±æ€§ä¸å­˜åœ¨çš„å…¼å®¹å¤„ç†</span></span><br><span class="line">        <span class="built_in">this</span>.getDeserializationConfig().withoutFeatures(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">SimpleModule</span> <span class="variable">simpleModule</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleModule</span>()</span><br><span class="line">                .addDeserializer(LocalDateTime.class, <span class="keyword">new</span> <span class="title class_">LocalDateTimeDeserializer</span>(DateTimeFormatter.ofPattern(DEFAULT_DATE_TIME_FORMAT)))</span><br><span class="line">                .addDeserializer(LocalDate.class, <span class="keyword">new</span> <span class="title class_">LocalDateDeserializer</span>(DateTimeFormatter.ofPattern(DEFAULT_DATE_FORMAT)))</span><br><span class="line">                .addDeserializer(LocalTime.class, <span class="keyword">new</span> <span class="title class_">LocalTimeDeserializer</span>(DateTimeFormatter.ofPattern(DEFAULT_TIME_FORMAT)))</span><br><span class="line"></span><br><span class="line">                .addSerializer(BigInteger.class, ToStringSerializer.instance)</span><br><span class="line">                .addSerializer(Long.class, ToStringSerializer.instance)</span><br><span class="line">                .addSerializer(LocalDateTime.class, <span class="keyword">new</span> <span class="title class_">LocalDateTimeSerializer</span>(DateTimeFormatter.ofPattern(DEFAULT_DATE_TIME_FORMAT)))</span><br><span class="line">                .addSerializer(LocalDate.class, <span class="keyword">new</span> <span class="title class_">LocalDateSerializer</span>(DateTimeFormatter.ofPattern(DEFAULT_DATE_FORMAT)))</span><br><span class="line">                .addSerializer(LocalTime.class, <span class="keyword">new</span> <span class="title class_">LocalTimeSerializer</span>(DateTimeFormatter.ofPattern(DEFAULT_TIME_FORMAT)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ³¨å†ŒåŠŸèƒ½æ¨¡å— ä¾‹å¦‚ï¼Œå¯ä»¥æ·»åŠ è‡ªå®šä¹‰åºåˆ—åŒ–å™¨å’Œååºåˆ—åŒ–å™¨</span></span><br><span class="line">        <span class="built_in">this</span>.registerModule(simpleModule);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â‘¡åœ¨WebMvcConfigé…ç½®ç±»ä¸­æ‰©å±•Spring mvcçš„æ¶ˆæ¯è½¬æ¢å™¨ï¼Œåœ¨æ­¤æ¶ˆæ¯è½¬æ¢å™¨ä¸­ä½¿ç”¨æä¾›çš„å¯¹è±¡è½¬æ¢å™¨è¿›è¡ŒJavaå¯¹è±¡åˆ°jsonæ•°æ®çš„è½¬æ¢(é‡å†™WebMvcConfigurationSupporté‡Œçš„ extendMessageConvertersæ–¹æ³•)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">extendMessageConverters</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span> &#123;</span><br><span class="line">        <span class="type">MappingJackson2HttpMessageConverter</span> <span class="variable">mappingJackson2HttpMessageConverter</span> <span class="operator">=</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">MappingJackson2HttpMessageConverter</span>();</span><br><span class="line"></span><br><span class="line">        mappingJackson2HttpMessageConverter.setObjectMapper(<span class="keyword">new</span> <span class="title class_">JacksonObjectMapper</span>());</span><br><span class="line"></span><br><span class="line">        converters.add(<span class="number">0</span>,mappingJackson2HttpMessageConverter);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>â‘¢è¯¥è‡ªå®šä¹‰çš„å¯¹è±¡è½¬æ¢å™¨, ä¸»è¦æŒ‡å®šäº†, åœ¨è¿›è¡Œjsonæ•°æ®åºåˆ—åŒ–åŠååºåˆ—åŒ–æ—¶, LocalDateTimeã€LocalDateã€LocalTimeçš„å¤„ç†æ–¹å¼, ä»¥åŠBigIntegeråŠLongç±»å‹æ•°æ®ï¼Œç›´æ¥è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</p>
<p><strong>æ€»ç»“:å› ä¸ºæ•°æ®åº“idéƒ½æ˜¯é‡‡ç”¨mybatis-plusæä¾›çš„é›ªèŠ±ç®—æ³•èµ‹å€¼,æ‰€ä»¥idå€¼éƒ½æ˜¯19ä½,ç„¶è€Œå°†æ•°æ®æä¾›ç»™å‰ç«¯é¡µé¢æ—¶,jsè§£æIDæ•°æ®æ—¶,æœ€å¤šåªèƒ½è§£æ16ä½åŠä»¥å†…çš„æ•°æ®,æ‰€ä»¥å¯¼è‡´äº†ç²¾åº¦ä¸¢å¤±,ä¹Ÿå°±ä¼šå‘ç”Ÿé¡µé¢å­˜å‚¨æ•°æ®çš„idä¸æ•°æ®åº“çš„idä¸ä¸€è‡´,æ‰€ä»¥å½“æˆ‘ä»¬æƒ³é€šè¿‡ä»é¡µé¢è·å–idå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®åšä¸€äº›æ“ä½œçš„æ—¶å€™å°±ä¼šå‡ºç°é—®é¢˜.</strong></p>
<p>æ€è·¯:â‘ å› ä¸ºé—®é¢˜å‡ºç°åœ¨ç²¾åº¦ä¸¢å¤±,é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è€ƒè™‘æŠŠidè½¬æ¢æˆå­—ç¬¦ä¸²ç±»å‹è®©é¡µé¢æ¥å—.</p>
<p>â€‹        â‘¡æˆ‘ä»¬å¯ä¸å¯ä»¥å°†pojoç±»çš„idè®¾ä¸ºString,æ•°æ®åº“idè®¾ç½®ä¸ºvarcharç±»å‹å‘¢?</p>
<p>â€‹        â‘¢å¯ä»¥,ä½†æ˜¯ä¸å»ºè®®,å› ä¸ºåœ¨åšä¸šåŠ¡æ“ä½œçš„æ—¶å€™æ ¹æ®idæŸ¥è¯¢çš„å‚æ•°éƒ½æ˜¯Integerç±»å‹,æ‰€ä»¥æ²¡æœ‰å¿…è¦ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«</p>
<p>â€‹        â‘£é‚£ä¹ˆå°±æ‰¾å‡ºé—®é¢˜çš„åŸå› ,å¾ˆæ˜æ˜¾åŸå› å‡ºåœ¨è¿”å›å€¼,åœ¨springbootæ¡†æ¶ä¸­,æˆ‘ä»¬åœ¨controllerå±‚è¿”å›ç»™é¡µé¢çš„æ•°æ®éƒ½æ˜¯springmvcæ¡†æ¶å¸®æˆ‘ä»¬è‡ªåŠ¨å°è£…æˆjsonæ•°æ®,è€Œspringé»˜è®¤å¤„ç†jsonæ•°æ®çš„å¯¹è±¡,SpringMVCçš„æ¶ˆæ¯è½¬æ¢å™¨,é»˜è®¤ä¼šå¸®æˆ‘ä»¬è½¬æ¢å‚æ•°ç±»å‹.</p>
<p>â€‹        â‘¤æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†springmvcä¸­çš„æ¶ˆæ¯è½¬æ¢å™¨è¿›è¡Œæ‰©å±•,ä¹Ÿå°±æ˜¯ä¸Šè¿°æä¾›çš„è‡ªå®šä¹‰JacksonObjectMapperç±»,é€šè¿‡è‡ªå®šä¹‰è®¾å®šâ€“&gt;å½“é‡åˆ°Longç±»å‹æ•°æ®æ˜¯,è‡ªåŠ¨è½¬ä¸ºæ¢ä¸ºå­—ç¬¦ä¸²è¿”å›ç»™é¡µé¢å­˜å‚¨.</p>
<p>â€‹        â‘¥è¿™æ ·å°±å¯ä»¥é¿å…jsåœ¨æ¥å—æ•°æ®æ—¶ç²¾åº¦ä¸¢å¤±äº†.</p>
<h1 id="MD5åŠ å¯†"><a href="#MD5åŠ å¯†" class="headerlink" title="MD5åŠ å¯†"></a>MD5åŠ å¯†</h1><p>MD5åŠ å¯†:</p>
<p>å¯ä»¥ä½¿ç”¨apacheçš„commons-codecå·¥å…·ç±»æˆ–è€…Springæä¾›çš„DigestUtilså·¥å…·ç±»,å¯¼ä¸åŒçš„åŒ…å°±è¡Œäº†(å·¥å…·åŒ…åå­—ä¸€æ ·)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.util.DigestUtils;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhangminghao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/26 8:19 ä¸‹åˆ</span></span><br><span class="line"><span class="comment"> * æœ€éš¾ä¸è¿‡åšæŒğŸ‘ŠğŸ»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> org.apache.commons.codec.digest.DigestUtils.md5Hex(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;apache----&gt;&quot;</span>+s1);</span><br><span class="line">        <span class="comment">//è¾“å‡º:apache----&gt;e10adc3949ba59abbe56e057f20f883e</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> DigestUtils.md5DigestAsHex(<span class="string">&quot;123456&quot;</span>.getBytes());</span><br><span class="line">        System.out.println(<span class="string">&quot;spring----&gt;&quot;</span>+s2);</span><br><span class="line">        <span class="comment">//è¾“å‡º:spring----&gt;e10adc3949ba59abbe56e057f20f883e</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŒºåˆ«:apacheçš„commons-codecçš„ä¼˜åŠ¿,æ‹¥æœ‰å¤§éƒ¨åˆ†çš„åŠ å¯†æ–¹å¼,è€Œspringåªæœ‰md5åŠ å¯†</p>
<p>â‘ apacheçš„commons-codec:</p>
<p>Commons codecï¼Œæ˜¯é¡¹ç›®ä¸­ç”¨æ¥å¤„ç†å¸¸ç”¨çš„ç¼–ç æ–¹æ³•çš„å·¥å…·ç±»åŒ…ï¼Œä¾‹å¦‚DESã€SHA1ã€MD5ã€Base64ï¼ŒURLï¼ŒSoundxç­‰ç­‰ã€‚ä¸ä»…æ˜¯ç¼–ç ï¼Œä¹Ÿå¯ç”¨äºè§£ç </p>
<p><img src="https://s1.ax1x.com/2022/04/27/LqC4Pg.png" alt="LqC4Pg.png"></p>
<p>â‘¡springçš„DigestUtils:</p>
<p>MD5åŠ å¯†</p>
<p><img src="https://s1.ax1x.com/2022/04/27/LqCfIS.png" alt="LqCfIS.png"></p>
<h1 id="MD5å’ŒBase64åŠ å¯†æ–¹å¼-æ‰©å……ä¸Šé¢çŸ¥è¯†ç‚¹"><a href="#MD5å’ŒBase64åŠ å¯†æ–¹å¼-æ‰©å……ä¸Šé¢çŸ¥è¯†ç‚¹" class="headerlink" title="MD5å’ŒBase64åŠ å¯†æ–¹å¼,æ‰©å……ä¸Šé¢çŸ¥è¯†ç‚¹"></a>MD5å’ŒBase64åŠ å¯†æ–¹å¼,æ‰©å……ä¸Šé¢çŸ¥è¯†ç‚¹</h1><p>1.MD5æ•£åˆ—ç®—æ³•</p>
<p>è¯æ±‡è§£é‡Šï¼š<br>MD5æ¶ˆæ¯æ‘˜è¦ç®—æ³•ï¼ˆè‹±è¯­ï¼šMD5 Message-Digest Algorithmï¼‰ï¼Œä¸€ç§è¢«å¹¿æ³›ä½¿ç”¨çš„å¯†ç æ•£åˆ—å‡½æ•°ï¼Œå¯ä»¥äº§ç”Ÿå‡ºä¸€ä¸ª128ä½ï¼ˆ16å­—èŠ‚ï¼‰çš„æ•£åˆ—å€¼ï¼ˆhash valueï¼‰ï¼Œç”¨äºç¡®ä¿ä¿¡æ¯ä¼ è¾“å®Œæ•´ä¸€è‡´ã€‚MD5ç”±ç¾å›½å¯†ç å­¦å®¶ç½—çº³å¾·Â·æç»´æ–¯ç‰¹ï¼ˆRonald Linn Rivestï¼‰è®¾è®¡ï¼Œäº1992å¹´å…¬å¼€ï¼Œç”¨ä»¥å–ä»£MD4ç®—æ³•(MD5ä¸å¯é€†)</p>
<p>2.Base64</p>
<p>æ˜¯ç½‘ç»œä¸Šæœ€å¸¸è§çš„ç”¨äºä¼ è¾“8Bitå­—èŠ‚ç çš„ç¼–ç æ–¹å¼ä¹‹ä¸€ï¼ŒBase64å°±æ˜¯ä¸€ç§åŸºäº64ä¸ªå¯æ‰“å°å­—ç¬¦æ¥è¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®çš„æ–¹æ³•ã€‚å¯æŸ¥çœ‹RFC2045ï½RFC2049ï¼Œä¸Šé¢æœ‰MIMEçš„è¯¦ç»†è§„èŒƒ(Base64 çš„åŠ å¯†ç®—æ³•æ˜¯å¯é€†çš„)</p>
<h1 id="ç”¨æˆ·é€€å‡ºé”€æ¯session"><a href="#ç”¨æˆ·é€€å‡ºé”€æ¯session" class="headerlink" title="ç”¨æˆ·é€€å‡ºé”€æ¯session"></a>ç”¨æˆ·é€€å‡ºé”€æ¯session</h1><p><img src="https://s1.ax1x.com/2022/04/27/LqCRVf.png" alt="LqCRVf.png"></p>
<h1 id="AntPathMatcheråŸºæœ¬ä½¿ç”¨"><a href="#AntPathMatcheråŸºæœ¬ä½¿ç”¨" class="headerlink" title="AntPathMatcheråŸºæœ¬ä½¿ç”¨"></a>AntPathMatcheråŸºæœ¬ä½¿ç”¨</h1><p>é¦–å…ˆï¼ŒAntPathMatcheræ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆèƒ½åŠ›ï¼Ÿ<br>AntPathMatheræ˜¯Springæä¾›çš„ç”¨äºå¯¹èµ„æºè·¯å¾„è¿›è¡Œè§£ææˆ–è€…å¯¹urlçš„å­—ç¬¦ä¸²åšåŒ¹é…ç”¨çš„ã€‚æ— è®ºæ˜¯èµ„æºè·¯å¾„è¿˜æ˜¯urlå­—ç¬¦ä¸²éƒ½æ˜¯é‡‡ç”¨çš„æ˜¯Antæ ¼å¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªä¸ç”¨æ‹¦æˆªçš„æ•°ç»„</span></span><br><span class="line">        String[] urls = &#123;</span><br><span class="line">                <span class="string">&quot;/backend/**&quot;</span>,</span><br><span class="line">                <span class="string">&quot;/front/**&quot;</span>,</span><br><span class="line">                <span class="string">&quot;/employee/login&quot;</span>,</span><br><span class="line">                <span class="string">&quot;/employee/logout&quot;</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">//è·å–urlè·¯å¾„</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">uri</span> <span class="operator">=</span> request.getRequestURI();</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜¯å¦æœ‰éæ‹¦æˆªè·¯å¾„</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> checkFilter(urls, uri); <span class="comment">//è°ƒç”¨ä¸‹é¢æ–¹æ³•,åŒ¹é…éæ‹¦æˆªè·¯å¾„</span></span><br><span class="line">        <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">            <span class="comment">//æœ‰å°±æ”¾è¡Œ</span></span><br><span class="line">            filterChain.doFilter(request,response);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">checkFilter</span><span class="params">( String[] urls,String uri)</span>&#123;</span><br><span class="line">        <span class="type">AntPathMatcher</span> <span class="variable">antPathMatcher</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AntPathMatcher</span>();</span><br><span class="line">        <span class="keyword">for</span> (String url : urls) &#123;</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> antPathMatcher.match(url, uri);</span><br><span class="line">            <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h1 id="Mybatis-plusä¸­ä½¿ç”¨è‡ªåŠ¨å¡«å……çš„å‘"><a href="#Mybatis-plusä¸­ä½¿ç”¨è‡ªåŠ¨å¡«å……çš„å‘" class="headerlink" title="Mybatis-plusä¸­ä½¿ç”¨è‡ªåŠ¨å¡«å……çš„å‘"></a>Mybatis-plusä¸­ä½¿ç”¨è‡ªåŠ¨å¡«å……çš„å‘</h1><p>å½“æˆ‘æƒ³åœ¨é¡¹ç›®ä¸­ä½¿ç”¨MyBatis-plusä¸­çš„è‡ªåŠ¨å¡«å……åŠŸèƒ½ç”¨æ¥è‡ªåŠ¨å¡«å……æ•°æ®çš„ä¿®æ”¹å’Œåˆ›å»ºæ—¶é—´æ—¶,å‘ç°æ•°æ®åœ¨åˆ›å»ºæ—¶å¯ä»¥è‡ªåŠ¨æ³¨å…¥,ä¿®æ”¹æ—¶ä¸å¯ä»¥,è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢?</p>
<p>å…ˆæ¥çœ‹çœ‹ä»£ç :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;start insert fill ....&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;createTime&quot;</span>, () -&gt; LocalDateTime.now(), LocalDateTime.class);</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;updateTime&quot;</span>, () -&gt; LocalDateTime.now(), LocalDateTime.class);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;start update fill ....&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.strictUpdateFill(metaObject, <span class="string">&quot;updateTime&quot;</span>, () -&gt; LocalDateTime.now(), LocalDateTime.class);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ–°å¢æ•°æ®</strong>æ—¶çš„è¯·æ±‚æ•°æ®å’Œè‡ªåŠ¨æ‰§è¡Œçš„sqlè¯­å¥:</p>
<p><img src="https://s1.ax1x.com/2022/04/27/LqCWa8.png" alt="LqCWa8.png"></p>
<p><strong>ä¿®æ”¹æ•°æ®</strong>æ—¶çš„è¯·æ±‚æ•°æ®å’Œè‡ªåŠ¨æ‰§è¡Œçš„sqlè¯­å¥:</p>
<p>ä¿®æ”¹æ•°æ®åˆ†ä¸º2æ­¥:</p>
<p>â‘ å½“æˆ‘ä»¬ç‚¹å‡»ç¼–è¾‘æŒ‰é’®çš„æ—¶å€™é€šè¿‡é¡µé¢é€šè¿‡å‘æœåŠ¡å™¨å‘é€å¾…ç¼–è¾‘çš„id,è®©æœåŠ¡å™¨é€šè¿‡idæŸ¥æ‰¾æ•°æ®å†å›æ˜¾åˆ°é¡µé¢è¡¨å•ä¸­<img src="https://s1.ax1x.com/2022/04/27/LqPGFS.png" alt="LqPGFS.png"></p>
<p>â‘¡ä¿®æ”¹å®Œæ•°æ®å,å°†æ•°æ®æäº¤ç»™æœåŠ¡å™¨,è®©æœåŠ¡ç«¯ä¿®æ”¹æ•°æ®</p>
<p><img src="https://s1.ax1x.com/2022/04/27/LqP1df.png" alt="LqP1df.png"></p>
<p>å‘ç°:</p>
<p>â‘ <strong>åœ¨ä¸Šé¢çš„æ•´ä½“æµç¨‹ä¸­æˆ‘ä»¬å‘ç°</strong>,åœ¨æ‰§è¡Œæ–°å¢æ•°æ®çš„æ—¶å€™,createTimeå’ŒupdateTimeéƒ½å®ç°äº†mysq-plusæä¾›çš„è‡ªåŠ¨æ³¨å…¥åŠŸèƒ½,ä½†æ˜¯åœ¨ä¿®æ”¹æ—¶,æ•°æ®å¯¹åº”çš„ä¿®æ”¹æ—¶é—´å´æ²¡æœ‰å‘ç”Ÿå˜åŒ–</p>
<p>â‘¡<strong>ä»è¯·æ±‚æ–¹å¼å‘ç°</strong>,æ–°å¢çš„æ—¶å€™,createTimeå’ŒupdateTimeæˆ‘ä»¬æ˜¯æ²¡æœ‰ç»™å€¼çš„,æ‰€ä»¥ä¼ åˆ°æœåŠ¡å™¨çš„æ—¶å€™,è¿™ä¸¤ä¸ªå€¼éƒ½æ˜¯ä»¥nullçš„å½¢å¼ä¼ è¿‡å»çš„,ä½†æ˜¯åœ¨ä¿®æ”¹çš„æ—¶å€™,æ˜¯é€šè¿‡idæŸ¥æ‰¾æ•°æ®å›æ˜¾åˆ°é¡µé¢è¡¨å•çš„,å½“æˆ‘ä»¬ä¿®æ”¹åŸºæœ¬æ•°æ®å,è¯¥æ•°æ®createTimeå’ŒupdateTimeåœ¨ä¿®æ”¹å‰å°±å·²ç»è¢«è‡ªåŠ¨å¡«å……äº†,æ‰€ä»¥ä¸æ˜¯null</p>
<p>â‘¢<strong>é€šè¿‡SQLè¯­å¥å‘ç°</strong>,å½“é¡µé¢è¡¨å•çš„createTimeå’ŒupdateTimeä¸ºNULLçš„æ—¶å€™,åœ¨æ‰§è¡Œsqlçš„æ—¶å€™ä¼šè‡ªåŠ¨å¡«å……,åä¹‹,å½“é¡µé¢è¡¨å•çš„æ•°æ®createTimeå’ŒupdateTimeä¸ä¸ºNULLçš„æ—¶å€™,æœåŠ¡å™¨æ‰§è¡Œsqlçš„æ—¶å€™åˆ™ä¸ä¼šè‡ªåŠ¨å¡«å……è¦†ç›–åŸæœ‰çš„å€¼,è€Œæ˜¯å°†åŸæœ‰çš„å€¼çº¹ä¸ä¸åŠ¨çš„è®¾ç½®åˆ°æ•°æ®ä¸­,ä¹Ÿå°±æ²¡æœ‰å‘ç”Ÿæ”¹å˜.</p>
<p>åŸå› :</p>
<p>å› ä¸ºMybatis-plusä¸­çš„çš„è‡ªåŠ¨å¡«å……åŠŸèƒ½çš„strictInsertFillå’ŒstrictUpdateFillé»˜è®¤æ˜¯è¢«è‡ªåŠ¨å¡«å……çš„å€¼ä¸ºNULLåˆ™è‡ªåŠ¨å¡«å……,ä¸ä¸ºNULLåˆ™ä¸è‡ªåŠ¨å¡«å……</p>
<p>è§£å†³æ–¹å¼:<br>â‘ åœ¨å¡«å……å‰åˆ¤æ–­metaObjectä¸­æœ‰æ²¡æœ‰éœ€è¦è‡ªåŠ¨å¡«å……çš„å€¼,å¦‚æœæœ‰åˆ™è®¾ç½®ä¸ºnull</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">     <span class="type">Object</span> <span class="variable">updateTime</span> <span class="operator">=</span> metaObject.getValue(<span class="string">&quot;updateTime&quot;</span>);</span><br><span class="line">     <span class="keyword">if</span>(metaObject.hasSetter(<span class="string">&quot;updateTime&quot;</span>))&#123;</span><br><span class="line">         metaObject.setValue(<span class="string">&quot;updateTime&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="built_in">this</span>.strictUpdateFill(metaObject, <span class="string">&quot;updateTime&quot;</span>, () -&gt; LocalDateTime.now(), LocalDateTime.class);</span><br></pre></td></tr></table></figure>

<p>â‘¡ä½¿ç”¨setFieldValByNameç›´æ¥è®¾ç½®updateTimeçš„å€¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">    log.info(<span class="string">&quot;start update fill ....&quot;</span>);</span><br><span class="line">    <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span>,LocalDateTime.now(),metaObject);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="POJO-DTO-VOä¹‹é—´çš„åŒºåˆ«"><a href="#POJO-DTO-VOä¹‹é—´çš„åŒºåˆ«" class="headerlink" title="POJO,DTO,VOä¹‹é—´çš„åŒºåˆ«"></a>POJO,DTO,VOä¹‹é—´çš„åŒºåˆ«</h1><p>POJOå«ä¹‰:ä¸æ•°æ®åº“çš„è¡¨ä¸€ä¸€å¯¹åº”,ç”¨æ¥å°è£…ä»æ•°æ®åº“æŸ¥è¯¢çš„æ•°æ®,ä¸åŒçš„å…¬å¸è¦æ±‚çš„åå­—ä¸ä¸€æ ·,æ¯”å¦‚è¿˜æœ‰po,entity,domain,model,javabean,bean,ä½†æ˜¯è¡¨è¾¾çš„å«ä¹‰éƒ½æ˜¯ä¸€æ ·çš„.</p>
<p>DTOå«ä¹‰:æŒ‡æµè§ˆå™¨æäº¤å‚æ•°ç»™æœåŠ¡å™¨,æœåŠ¡å™¨ç”¨æ¥å°è£…å¯¹åº”å‚æ•°çš„å¯¹è±¡</p>
<p>VOå«ä¹‰:æŒ‡æœåŠ¡å™¨å“åº”ç»™æµè§ˆå™¨çš„æ•°æ®,å°†æ•°æ®å°è£…åä¼ é€’ç»™æµè§ˆå™¨</p>
<h1 id="ä½¿ç”¨è¿‡æ»¤å™¨çš„æ—¶å€™-WebFilteræ³¨æ„äº‹é¡¹"><a href="#ä½¿ç”¨è¿‡æ»¤å™¨çš„æ—¶å€™-WebFilteræ³¨æ„äº‹é¡¹" class="headerlink" title="ä½¿ç”¨è¿‡æ»¤å™¨çš„æ—¶å€™@WebFilteræ³¨æ„äº‹é¡¹"></a>ä½¿ç”¨è¿‡æ»¤å™¨çš„æ—¶å€™@WebFilteræ³¨æ„äº‹é¡¹</h1><p>å› ä¸º@WebFilteræ˜¯Servletç®¡ç†,æ‰€ä»¥éœ€è¦åœ¨å¼•å¯¼ç±»åŠ ä¸Š@ServletComponentScan,æ‰«æåˆ°@WebFilteræ‰èƒ½ç”Ÿæ•ˆ</p>
<h2 id="common-Fileuploadâ€”â€“-gt-MultipartFile-file"><a href="#common-Fileuploadâ€”â€“-gt-MultipartFile-file" class="headerlink" title="common-Fileuploadâ€”â€“&gt;MultipartFile file"></a>common-Fileuploadâ€”â€“&gt;MultipartFile file</h2><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2a5ndr842j215o07mwgf.jpg" alt="image-20220430084336123"></p>
<h1 id="Transactionå¯èƒ½äº‹åŠ¡å¤±æ•ˆçš„åœ°æ–¹"><a href="#Transactionå¯èƒ½äº‹åŠ¡å¤±æ•ˆçš„åœ°æ–¹" class="headerlink" title="@Transactionå¯èƒ½äº‹åŠ¡å¤±æ•ˆçš„åœ°æ–¹"></a>@Transactionå¯èƒ½äº‹åŠ¡å¤±æ•ˆçš„åœ°æ–¹</h1><p>é¡¹ç›®é‡‡ç”¨äº†Mybatis-plus,mapperå’Œserviceéƒ½å„è‡ªå®ç°å’Œç»§æ‰¿äº†mybatis-lpusæä¾›çš„çš„æ¥å£,æ‰€ä»¥åœ¨é¡¹ç›®ä¸­çš„Serviceå±‚å¯ä»¥ç›´æ¥ç”¨thisè°ƒç”¨çˆ¶ç±»serviceImplçš„æ–¹æ³•,è¿™æ ·å¯èƒ½å¯¼è‡´è¢«thisæ‰€è°ƒç”¨çš„æ–¹æ³•äº‹åŠ¡å¤±æ•ˆ,å› ä¸ºthisç›´æ¥è°ƒçˆ¶ç±»çš„æ–¹æ³•,æ²¡æœ‰è¢«ä»£ç†å¯¹è±¡æ‰€ä»£ç†,ä½†æ˜¯åŠ ä¸Š@Transactionæ³¨è§£çš„æ–¹æ³•,å¿…é¡»è¦ä»£ç†å¯¹è±¡è°ƒç”¨æ—¶,æ‰èƒ½å®ç°äº‹åŠ¡ä¿æŠ¤</p>
<p>è§£å†³æ–¹æ¡ˆ:è‡ªå·±æ³¨å…¥è‡ªå·±@Autowiredâ€”&gt;xxxservice,ä½†æ˜¯éœ€è¦è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜.</p>
<h1 id="åšé¡¹ç›®ä¸­åŠ ä¸ŠToDo-è¡¨ç¤ºé¡¹ç›®æœªå®Œæˆ"><a href="#åšé¡¹ç›®ä¸­åŠ ä¸ŠToDo-è¡¨ç¤ºé¡¹ç›®æœªå®Œæˆ" class="headerlink" title="åšé¡¹ç›®ä¸­åŠ ä¸ŠToDo,è¡¨ç¤ºé¡¹ç›®æœªå®Œæˆ"></a>åšé¡¹ç›®ä¸­åŠ ä¸ŠToDo,è¡¨ç¤ºé¡¹ç›®æœªå®Œæˆ</h1><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2a5nfdafdj20cw07ugma.jpg" alt="image-20220430110948139"></p>
<h1 id="pojoå››å¤§ç‰¹å¾"><a href="#pojoå››å¤§ç‰¹å¾" class="headerlink" title="pojoå››å¤§ç‰¹å¾"></a>pojoå››å¤§ç‰¹å¾</h1><p>æ— å‚æ„é€ æ–¹æ³•,getæ–¹æ³•,setæ–¹æ³•,å®ç°serializableæ¥å£åºåˆ—åŒ–</p>

                
            </div>
        </article>
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2022/04/24/SpringMvc/">SpringMVCä½¿ç”¨</a>
            </div>
            <p class="sub">Apr 24 2022</p>
            <div class="post-content">
                
                    <h1 id="1-ä»€ä¹ˆæ˜¯Mvc"><a href="#1-ä»€ä¹ˆæ˜¯Mvc" class="headerlink" title="1.ä»€ä¹ˆæ˜¯Mvc"></a>1.ä»€ä¹ˆæ˜¯Mvc</h1><p>â‘ Mvcæ˜¯ä¸€ç§è½¯ä»¶æ¶æ„çš„æ€æƒ³,å°†è½¯ä»¶æŒ‰ç…§æ¨¡å‹,è§†å›¾,æ§åˆ¶å™¨æ¥åˆ’åˆ†</p>
<blockquote>
<p>M:Model,æ¨¡å‹å±‚,æŒ‡å·¥ç¨‹ä¸­çš„JavaBean,ä½œç”¨æ˜¯æ•°æ®å¤„ç†</p>
<p>V:View,è§†å›¾å±‚,æŒ‡å·¥ç¨‹ä¸­çš„htmlæˆ–jspç­‰é¡µé¢,ä½œç”¨æ˜¯ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’,å±•ç¤ºæ•°æ®</p>
<p>C:Controller,æ§åˆ¶å±‚,æŒ‡å·¥ç¨‹ä¸­çš„servlet,ä½œç”¨æ˜¯æ¥å—è¯·æ±‚å’Œå“åº”æµè§ˆå™¨</p>
</blockquote>
<p>â‘¡JavaBeanåˆ†ä¸ºä¸¤ç±»:</p>
<ul>
<li>ä¸€ç±»ç§°ä¸ºå®ä½“ç±»Bean:ä¸“é—¨å­˜å‚¨ä¸šåŠ¡æ•°æ®çš„,å¦‚Student,Userç­‰</li>
<li>ä¸€ç±»ç§°ä¸ºä¸šåŠ¡å¤„ç†Bean:æŒ‡Serviceæˆ–Daoå¯¹è±¡,ä¸“é—¨ç”¨äºå¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®.</li>
</ul>
<p>â‘¢Mvcçš„å·¥ä½œæµç¨‹:</p>
<ul>
<li>ç”¨æˆ·é€šè¿‡è§†å›¾å±‚å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨,åœ¨æœåŠ¡å™¨ä¸­è¯·æ±‚è¢«Controlleræ¥å—,Controllerè°ƒç”¨ç›¸åº”çš„Modelå±‚å¤„ç†è¯·æ±‚,å¤„ç†å®Œæ¯•å°†ç»“æœè¿”å›åˆ°Controller,Controllerå†æ ¹æ®è¯·æ±‚å¤„ç†çš„ç»“æœæ‰¾åˆ°ç›¸åº”çš„Viewè§†å›¾,æ¸²æŸ“æ•°æ®åæœ€ç»ˆå“åº”ç»™æµè§ˆå™¨</li>
</ul>
<h1 id="2-ä»€ä¹ˆæ˜¯SpringMvc"><a href="#2-ä»€ä¹ˆæ˜¯SpringMvc" class="headerlink" title="2.ä»€ä¹ˆæ˜¯SpringMvc"></a>2.ä»€ä¹ˆæ˜¯SpringMvc</h1><ul>
<li><p>SpringMvcæ˜¯Springçš„ä¸€ä¸ªåç»­äº§å“,æ˜¯Springçš„ä¸€ä¸ªå­é¡¹ç›®,æ˜¯åŸºäºServletçš„</p>
</li>
<li><p>SpringMvcå°±æ˜¯Springçš„Mvcæ¨¡å—çš„å†…å®¹,ä»–æ˜¯Springä¸ºè¡¨è¿°å±‚å¼€å‘æä¾›çš„ä¸€æ•´å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆ</p>
</li>
<li><p>åœ¨SpringMcvæ‰€å°è£…çš„å¸¦æœ‰åŠŸèƒ½çš„Servlet,æŠŠå¤„ç†è¯·æ±‚çš„åŠŸèƒ½éƒ½è¿›è¡Œäº†å°è£…</p>
</li>
<li><p>æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨SpringMvcæä¾›çš„å®ç°åŠŸèƒ½çš„ä»£ç ,å°±å¯ä»¥å®Œæˆè¯·æ±‚çš„å¤„ç†äº†</p>
</li>
<li><p>å‰å°é¡µé¢å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ä¸­,æœåŠ¡å™¨æ¥ä½¿ç”¨Servletæ¥æ¥å—è¯·æ±‚å¤„ç†è¯·æ±‚,  éœ€è¦æ ¹æ®è¯·æ±‚åœ°å€æ‰¾åˆ°ç›¸åº”çš„Servlet,å…¶ä¸­Servletçš„service(ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•ä¹‹ä¸€)æ–¹æ³•å°±æ˜¯å¤„ç†è¯·æ±‚å’Œå“åº”çš„æ–¹æ³•</p>
</li>
</ul>
<p><strong>æ³¨:ä¸‰å±‚æ¶æ„ä¸ºè¡¨è¿°å±‚(å‰å°é¡µé¢+åå°Servlte)+ä¸šåŠ¡é€»è¾‘å±‚+æ•°æ®è®¿é—®å±‚</strong></p>
<h1 id="3-springMvcçš„ç‰¹ç‚¹"><a href="#3-springMvcçš„ç‰¹ç‚¹" class="headerlink" title="3.springMvcçš„ç‰¹ç‚¹"></a>3.springMvcçš„ç‰¹ç‚¹</h1><p>â‘ ä¸ºä»€ä¹ˆæœ‰Servletä¸ç”¨,è¦ä½¿ç”¨SpringMvc?</p>
<blockquote>
<p>SpringMvcå°±æ˜¯ä¸€ä¸ªServlet,å°è£…Servletåå°±æœ‰äº†ä¸€ä¸ªåŠŸèƒ½éå¸¸å¼ºå¤§çš„å‰ç«¯æ§åˆ¶å™¨DispatcherServlet,åŸæ¥é¡µé¢å‘é€æ¥çš„è¯·æ±‚,éœ€è¦æˆ‘ä»¬è‡ªå·±å†™Servletæ¥å¤„ç†,ç„¶è€Œä½¿ç”¨SpringMvcåå°±é€šè¿‡SpringMvcæ¥è¿›è¡Œç»Ÿä¸€å¤„ç†,SpringMvcä¼šå¯¹æ¥å—è¯·æ±‚åšå‡ºå“åº”çš„å¾ˆå¤šçš„è¿‡ç¨‹è¿›è¡Œå°è£…,æ¯”å¦‚ç”¨åŸç”ŸServletè·å–è¯·æ±‚å‚æ•°,æ¯”å¦‚å¾€åŸŸå¯¹è±¡æ”¾å€¼çš„æ—¶å€™,æ¯”å¦‚é¡µé¢è·³è½¬å’Œé‡å®šå‘çš„æ—¶å€™,é‚£ä¹ˆè¿™ä¸ªæ—¶å€™DispatcherServleä¼šå¯¹è¿™äº›æ“ä½œè¿›è¡Œç»Ÿä¸€å¤„ç†</p>
</blockquote>
<p>â‘¡ç‰¹ç‚¹æ€»ç»“:</p>
<ul>
<li><strong>springå®¶æ—åŸç”Ÿäº§å“</strong>,ä¸IOCå®¹å™¨ç­‰åŸºç¡€è®¾æ–½æ— ç¼å¯¹æ¥</li>
<li><strong>åŸºäºåŸç”Ÿçš„Servlet</strong>,é€šè¿‡äº†åŠŸèƒ½å¼ºå¤§çš„<strong>å‰ç«¯æ§åˆ¶å™¨DispatcherServlet</strong>,å¯¹è¯·æ±‚å“åº”è¿›è¡Œç»Ÿä¸€å¤„ç†</li>
<li>è¡¨è¿°å±‚å„ç»†åˆ†é¢†åŸŸéœ€è¦è§£å†³çš„é—®é¢˜<strong>å…¨æ–¹ä½è¦†ç›–</strong>,æä¾›<strong>å…¨é¢è§£å†³æ–¹æ¡ˆ</strong></li>
<li><strong>ä»£ç æ¸…æ–°ç®€ä»‹</strong>,å¤§å¹…åº¦æå‡å¼€å‘æ•ˆç‡</li>
<li>å†…éƒ¨ç»„ä»¶åŒ–ç¨‹åº¦é«˜,å¯æ’æ‹”å¼ç»„ä»¶<strong>å³æ’å³ç”¨</strong>,æƒ³è¦ä»€ä¹ˆåŠŸèƒ½é…ç½®ç›¸åº”ç»„ä»¶å³å¯</li>
<li><strong>æ€§èƒ½å“è¶Š</strong>,å°¤å…¶æ˜¯å’Œç°ä»£å¤§å‹å—,è¶…å¤§å‹äº’è”ç½‘é¡¹ç›®éœ€æ±‚</li>
</ul>
<h1 id="4-web-xmlæ˜¯ä»€ä¹ˆ"><a href="#4-web-xmlæ˜¯ä»€ä¹ˆ" class="headerlink" title="4.web.xmlæ˜¯ä»€ä¹ˆ?"></a>4.web.xmlæ˜¯ä»€ä¹ˆ?</h1><ul>
<li>web.xmlæ˜¯æˆ‘ä»¬webå·¥ç¨‹çš„ä¸€ä¸ª<strong>å…¥å£é…ç½®æ–‡ä»¶</strong>,åœ¨æ–‡ä»¶é‡Œæˆ‘ä»¬å¯ä»¥æ³¨å†ŒServletå¯ä»¥æ³¨å†ŒFilterè¿‡æ»¤å™¨,ç›‘å¬å™¨ç­‰..</li>
</ul>
<h2 id="5-ä¸ºä»€ä¹ˆè¦åœ¨web-xmlæ–‡ä»¶é‡Œé¢æ³¨å†ŒServlet"><a href="#5-ä¸ºä»€ä¹ˆè¦åœ¨web-xmlæ–‡ä»¶é‡Œé¢æ³¨å†ŒServlet" class="headerlink" title="5.ä¸ºä»€ä¹ˆè¦åœ¨web.xmlæ–‡ä»¶é‡Œé¢æ³¨å†ŒServlet?"></a>5.ä¸ºä»€ä¹ˆè¦åœ¨web.xmlæ–‡ä»¶é‡Œé¢æ³¨å†ŒServlet?</h2><ul>
<li>web.xmlé…ç½®æ–‡ä»¶æ˜¯webå·¥ç¨‹çš„ä¸€ä¸ªå…¥å£æ–‡ä»¶,<strong>å› ä¸ºæµè§ˆå™¨ä¸èƒ½å»ç›´æ¥è®¿é—®ä¸€ä¸ªç±»</strong>,æ‰€ä»¥è¦åœ¨web.xmlæ–‡ä»¶é‡Œé¢æ¥è·ŸServletæ³¨å†Œä¸€ä¸ªåŒ¹é…è·¯å¾„,æ‰èƒ½è®©æµè§ˆå™¨å»è®¿é—®åˆ°Servlet,æ¯å½“æˆ‘ä»¬è®¿é—®çš„è·¯å¾„ç¬¦åˆç›®å‰æ‰€è®¾ç½®çš„åŒ¹é…è·¯å¾„çš„æ—¶å€™,é‚£ä¹ˆè¿™ä¸ªæ—¶å€™å½“å‰çš„è¯·æ±‚å°±ä¼šè®©Servletæ¥æ¥å—å‚æ•°å¹¶å¤„ç†</li>
</ul>
<h1 id="6-ä¸ºä»€ä¹ˆåœ¨web-xmlä¸­æ³¨å†ŒDispatcherServletçš„è€Œä¸æ˜¯Servlet"><a href="#6-ä¸ºä»€ä¹ˆåœ¨web-xmlä¸­æ³¨å†ŒDispatcherServletçš„è€Œä¸æ˜¯Servlet" class="headerlink" title="6.ä¸ºä»€ä¹ˆåœ¨web.xmlä¸­æ³¨å†ŒDispatcherServletçš„è€Œä¸æ˜¯Servlet?"></a>6.ä¸ºä»€ä¹ˆåœ¨web.xmlä¸­æ³¨å†ŒDispatcherServletçš„è€Œä¸æ˜¯Servlet?</h1><ul>
<li>å› ä¸ºDispatcherServletä¸­å°è£…äº†Servlet,é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServletå¯ä»¥å¯¹æµè§ˆå™¨å‘é€çš„è¯·æ±‚è¿›è¡Œç»Ÿä¸€å¤„ç†,æå¤§çš„ç®€åŒ–äº†æˆ‘ä»¬çš„è¡¨è¿°å±‚çš„ä»£ç !</li>
</ul>
<h1 id="7-ä¸ºä»€ä¹ˆåœ¨web-xmlä¸­æ³¨å†ŒDispatcherServletçš„åŒ¹é…è·¯å¾„æ˜¯-x2F-è€Œä¸æ˜¯-x2F"><a href="#7-ä¸ºä»€ä¹ˆåœ¨web-xmlä¸­æ³¨å†ŒDispatcherServletçš„åŒ¹é…è·¯å¾„æ˜¯-x2F-è€Œä¸æ˜¯-x2F" class="headerlink" title="7.ä¸ºä»€ä¹ˆåœ¨web.xmlä¸­æ³¨å†ŒDispatcherServletçš„åŒ¹é…è·¯å¾„æ˜¯&#x2F;è€Œä¸æ˜¯&#x2F;*?"></a>7.ä¸ºä»€ä¹ˆåœ¨web.xmlä¸­æ³¨å†ŒDispatcherServletçš„åŒ¹é…è·¯å¾„æ˜¯&#x2F;è€Œä¸æ˜¯&#x2F;*?</h1><ul>
<li>å› ä¸º&#x2F;æ‰€é…ç½®çš„è¯·æ±‚å¯ä»¥æ˜¯&#x2F;loginæˆ–.htmlæˆ–.jsæˆ–.cssæ–¹å¼çš„è¯·æ±‚è·¯å¾„,ä½†æ˜¯&#x2F;ä¸èƒ½åŒ¹é….jspè¯·æ±‚è·¯å¾„çš„è¯·æ±‚</li>
</ul>
<h2 id="8-ä¸ºä»€ä¹ˆä¸è®©DispatcherServletåŒ¹é…è·¯å¾„å»åŒ¹é…-jspæ–‡ä»¶"><a href="#8-ä¸ºä»€ä¹ˆä¸è®©DispatcherServletåŒ¹é…è·¯å¾„å»åŒ¹é…-jspæ–‡ä»¶" class="headerlink" title="8.ä¸ºä»€ä¹ˆä¸è®©DispatcherServletåŒ¹é…è·¯å¾„å»åŒ¹é….jspæ–‡ä»¶?"></a>8.ä¸ºä»€ä¹ˆä¸è®©DispatcherServletåŒ¹é…è·¯å¾„å»åŒ¹é….jspæ–‡ä»¶?</h2><ul>
<li>å› ä¸º<strong>JSPæ–‡ä»¶</strong>çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ª<strong>Servletæ–‡ä»¶</strong>,å®ƒæ˜¯éœ€è¦<strong>æœåŠ¡å™¨æŒ‡å®šçš„Servletæ¥è¿›è¡Œç‰¹æ®Šå¤„ç†</strong>çš„,æ‰€ä»¥.jspæ–‡ä»¶ä¸éœ€è¦DispatcherServletæ¥å¤„ç†,å¦‚æœè·¯å¾„èƒ½å¤ŸåŒ¹é….jspæ–‡ä»¶çš„è¯,é‚£ä¹ˆè¿™ä¸ª.jspæ–‡ä»¶çš„è¯·æ±‚ä¹Ÿä¼šè¢«å½“å‰çš„SpringMVCæ¥è¿›è¡Œå¤„ç†,é‚£SpringMVCä¼šæŠŠå½“å‰è¿™ä¸ª.jpsçš„è¯·æ±‚å½“åšä¸€ä¸ª<strong>æ™®é€šçš„è¯·æ±‚æ¥å¤„ç†</strong>,è€Œä¸ä¼šæ‰¾åˆ°ç›¸å¯¹äºçš„jspé¡µé¢,æ‰€ä»¥è¦ç”¨&#x2F;æ¥æ’é™¤.jspé¡µé¢çš„è¯·æ±‚è·¯å¾„ç»™æ’é™¤æ‰,ç„¶å<strong>å…¶ä»–çš„è¯·æ±‚</strong>éƒ½è¦äº¤ç»™æˆ‘ä»¬çš„<strong>å‰ç«¯æ§åˆ¶å™¨DispatcherServletæ¥è¿›è¡Œå¤„ç†</strong></li>
</ul>
<h1 id="9-x2F-ä»£è¡¨ä»€ä¹ˆ"><a href="#9-x2F-ä»£è¡¨ä»€ä¹ˆ" class="headerlink" title="9.&#x2F;*ä»£è¡¨ä»€ä¹ˆ?"></a>9.&#x2F;*ä»£è¡¨ä»€ä¹ˆ?</h1><ul>
<li>&#x2F;*ä»£è¡¨æ‰€æœ‰è¯·æ±‚è·¯å¾„,åŒ…æ‹¬.jspé¡µé¢çš„è¯·æ±‚,ä¸€èˆ¬é€‚ç”¨äºæ³¨å†ŒFilterè¿‡æ»¤å™¨çš„åŒ¹é…è·¯å¾„</li>
</ul>
<h1 id="10-æ¡†æ¶æ˜¯ä»€ä¹ˆ"><a href="#10-æ¡†æ¶æ˜¯ä»€ä¹ˆ" class="headerlink" title="10.æ¡†æ¶æ˜¯ä»€ä¹ˆ?"></a>10.æ¡†æ¶æ˜¯ä»€ä¹ˆ?</h1><ul>
<li>é…ç½®æ–‡ä»¶+jaråŒ…</li>
</ul>
<h1 id="11-SpringMVCé…ç½®æ–¹å¼â‘ -é»˜è®¤é…ç½®æ–¹å¼"><a href="#11-SpringMVCé…ç½®æ–¹å¼â‘ -é»˜è®¤é…ç½®æ–¹å¼" class="headerlink" title="11.SpringMVCé…ç½®æ–¹å¼â‘ :é»˜è®¤é…ç½®æ–¹å¼"></a>11.SpringMVCé…ç½®æ–¹å¼â‘ :é»˜è®¤é…ç½®æ–¹å¼</h1><p>æ­¤é…ç½®ä½œç”¨ä¸‹,SpringMVCçš„é…ç½®æ–‡ä»¶<strong>é»˜è®¤æ–‡ä»¶ä½äºWEB-INF</strong>ä¸‹,<strong>é»˜è®¤åç§°ä¸º<servlet-name>-servlet.xml</strong>,ä¾‹å¦‚:ä¸€ä¸‹é…ç½®æ‰€å¯¹åº”SpringMVCçš„é…ç½®æ–‡ä»¶ä½äºWEB-INFä¸‹,æ–‡ä»¶åä¸ºspringMVC-servlet.xml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨,å¯¹æµè§ˆå™¨å‘é€çš„è¯·æ±‚è¿›è¡Œç»Ÿä¸€å¤„ç†--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®ServletMappingæ˜ å°„è·¯å¾„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        è®¾ç½®springMvcçš„æ ¸å¿ƒæ§åˆ¶å™¨æ‰€èƒ½å¤„ç†çš„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line"><span class="comment">        /æ‰€é…ç½®çš„è¯·æ±‚å¯ä»¥æ˜¯/loginæˆ–.htmlæˆ–.jsæˆ–.cssæ–¹å¼çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line"><span class="comment">        ,ä½†æ˜¯/ä¸èƒ½åŒ¹é….jspè¯·æ±‚è·¯å¾„çš„è¯·æ±‚</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ³¨:æ­¤é…ç½®æ–¹å¼ä¸å¥½,æˆ‘ä»¬å­¦ä¹ äº†mavenå·¥ç¨‹å,é…ç½®æ–‡ä»¶åº”è¯¥ç»Ÿä¸€æ”¾åœ¨resourceèµ„æºè·¯å¾„ä¸‹é¢,å› ä¸ºWEB-INFä¸‹åªæ”¾é¡µé¢å’Œé™æ€èµ„æº</strong></p>
<h1 id="12-SpringMVCé…ç½®æ–¹å¼â‘¡-æ‰©å±•é…ç½®æ–¹å¼"><a href="#12-SpringMVCé…ç½®æ–¹å¼â‘¡-æ‰©å±•é…ç½®æ–¹å¼" class="headerlink" title="12.SpringMVCé…ç½®æ–¹å¼â‘¡:æ‰©å±•é…ç½®æ–¹å¼"></a>12.SpringMVCé…ç½®æ–¹å¼â‘¡:æ‰©å±•é…ç½®æ–¹å¼</h1><ul>
<li>å¯ä»¥é€šè¿‡init-paramåˆå§‹åŒ–å‚æ•°æ ‡ç­¾è®¾ç½®SpringMVCé…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§°:</li>
</ul>
<blockquote>
<p> åˆå§‹åŒ–æ—¶è®¾ç½®å‚æ•°,å°†DispatcherServletçš„çˆ¶ç±»FrameworkServletä¸­çš„**contextConfigLocation(ä¸Šä¸‹æ–‡é…ç½®è·¯å¾„)**å‚æ•°è·¯å¾„è®¾ç½®ä¸ºè‡ªå®šä¹‰è·¯å¾„(classpath:æ–‡ä»¶å.xml) â€”â€“&gt;classpathå¯¹åº”çš„ç±»è·¯å¾„ä¹Ÿå°±æ˜¯javaåŒ…å’ŒresourceåŒ…</p>
</blockquote>
<ul>
<li>å¯ä»¥é€šè¿‡load-on-startupæ ‡ç­¾è®¾ç½®SpringMVCå‰ç«¯æ§åˆ¶å™¨DispatcherServletçš„åˆå§‹åŒ–æ—¶é—´:</li>
</ul>
<blockquote>
<p> å› ä¸ºDispatcherServletå°±æ˜¯ä¸€ä¸ªServlet,æ‰€ä»¥å£°æ˜å‘¨æœŸå’ŒServletæ˜¯ä¸€æ ·çš„,é»˜è®¤éƒ½æ˜¯åœ¨ç¬¬ä¸€æ¬¡è®¿é—®çš„æ—¶å€™è¿›è¡Œåˆå§‹åŒ–,ä½†æ˜¯DispatcherServletå°è£…äº†å¯¹è¯·æ±‚è¿‡ç¨‹æ‰€æœ‰çš„å¤„ç†,æ‰€ä»¥åˆå§‹åŒ–ä¸­è¦æ‰§è¡Œå¾ˆå¤šçš„å†…å®¹,å¦‚æœæŠŠä¼—å¤šçš„å¤„ç†å†…å®¹æ”¾åœ¨ç¬¬ä¸€æ¬¡è®¿é—®çš„æ—¶å€™åˆå§‹åŒ–,å°±ä¼šä¸¥é‡çš„å½±å“ç¬¬ä¸€æ¬¡è®¿é—®çš„é€Ÿåº¦</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨,å¯¹æµè§ˆå™¨å‘é€çš„è¯·æ±‚è¿›è¡Œç»Ÿä¸€å¤„ç†--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--é…ç½®SpringMVCé…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§°--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åˆå§‹åŒ–æ—¶è®¾ç½®å‚æ•°,å°†DispatcherServletçš„çˆ¶ç±»DispatcherServlet</span></span><br><span class="line"><span class="comment">        çš„contextConfigLocationå‚æ•°è·¯å¾„è®¾ç½®ä¸ºè‡ªå®šä¹‰è·¯å¾„--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--ä¸Šä¸‹æ–‡é…ç½®è·¯å¾„--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springMVC.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å°†å‰ç«¯æ§åˆ¶å™¨DispatcherServletçš„åˆå§‹åŒ–æ—¶é—´æå‰åˆ°æœåŠ¡å™¨å¯åŠ¨æ—¶</span></span><br><span class="line"><span class="comment">            å› ä¸ºDispatcherServletå°è£…äº†å¯¹è¯·æ±‚è¿‡ç¨‹æ‰€æœ‰çš„å¤„ç†,æ‰€ä»¥åˆå§‹åŒ–ä¸­è¦æ‰§è¡Œå¾ˆå¤šçš„å†…å®¹</span></span><br><span class="line"><span class="comment">            å¦‚æœæŠŠä¼—å¤šçš„å†…å®¹æ”¾åœ¨ç¬¬ä¸€æ¬¡è®¿é—®çš„æ—¶å€™åˆå§‹åŒ–,å°±ä¼šä¸¥é‡çš„å½±å“ç¬¬ä¸€æ¬¡è®¿é—®çš„é€Ÿåº¦</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®ServletMappingæ˜ å°„è·¯å¾„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        è®¾ç½®springMvcçš„æ ¸å¿ƒæ§åˆ¶å™¨æ‰€èƒ½å¤„ç†çš„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line"><span class="comment">        /æ‰€é…ç½®çš„è¯·æ±‚å¯ä»¥æ˜¯/loginæˆ–.htmlæˆ–.jsæˆ–.cssæ–¹å¼çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line"><span class="comment">        ,ä½†æ˜¯/ä¸èƒ½åŒ¹é….jspè¯·æ±‚è·¯å¾„çš„è¯·æ±‚</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="æ–‡ä»¶ä¸Šä¼ ä¸‰è¦ç´ "><a href="#æ–‡ä»¶ä¸Šä¼ ä¸‰è¦ç´ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ ä¸‰è¦ç´ "></a>æ–‡ä»¶ä¸Šä¼ ä¸‰è¦ç´ </h1><p>![image-20220429090202460](&#x2F;Users&#x2F;zhangminghao&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20220429090202460.png)</p>

                
            </div>
        </article>
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2022/04/22/springboot%E9%AB%98%E7%BA%A7/">springbooté«˜çº§</a>
            </div>
            <p class="sub">Apr 22 2022</p>
            <div class="post-content">
                
                    <h1 id="SpringBootæœ€é‡è¦çš„ä¸¤ä¸ªåŠŸèƒ½"><a href="#SpringBootæœ€é‡è¦çš„ä¸¤ä¸ªåŠŸèƒ½" class="headerlink" title="SpringBootæœ€é‡è¦çš„ä¸¤ä¸ªåŠŸèƒ½"></a>SpringBootæœ€é‡è¦çš„ä¸¤ä¸ªåŠŸèƒ½</h1><p>1.ç‰ˆæœ¬é”å®š(mybatisä¸ºä»€ä¹ˆæ²¡æœ‰é”å®š,å› ä¸ºmybatiså¼€å‘çš„æ¯”è¾ƒæ™š)</p>
<p>2.è‡ªåŠ¨è£…é…</p>
<h1 id="SpringBooté»˜è®¤é™æ€èµ„æºçš„å­˜æ”¾ç›®å½•æ˜¯ä»€ä¹ˆ"><a href="#SpringBooté»˜è®¤é™æ€èµ„æºçš„å­˜æ”¾ç›®å½•æ˜¯ä»€ä¹ˆ" class="headerlink" title="@SpringBooté»˜è®¤é™æ€èµ„æºçš„å­˜æ”¾ç›®å½•æ˜¯ä»€ä¹ˆ?"></a>@SpringBooté»˜è®¤é™æ€èµ„æºçš„å­˜æ”¾ç›®å½•æ˜¯ä»€ä¹ˆ?</h1><ul>
<li>ä»ä»¥ä¸‹å›¾ç‰‡å¯ä»¥å¾—çŸ¥SpringBooté»˜è®¤é™æ€èµ„æºçš„å­˜æ”¾ç›®å½•ä¸º:classpath:&#x2F;resource&#x2F;,classpath:&#x2F;static&#x2F;,classpath:&#x2F;public&#x2F;</li>
</ul>
<p>â‘ å½“å¯åŠ¨å¼•å¯¼ç±»æ—¶,å¼•å¯¼ç±»ä¼šè‡ªåŠ¨è£…é…,åŠ è½½spring.factoriesæ–‡ä»¶</p>
<p><img src="https://s1.ax1x.com/2022/04/25/LILA3Q.png" alt="LILA3Q.png"></p>
<p>â‘¡åœ¨æ–‡ä»¶é‡Œè¯»å–åˆ°WebMvcAutoConfigurationæ—¶</p>
<p><img src="https://s1.ax1x.com/2022/04/25/LILnH0.png" alt="LILnH0.png"></p>
<p>â‘¢ä¼šé€šè¿‡@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)æ¥åˆ¤æ–­å®¹å™¨é‡Œæ˜¯å¦æœ‰WebMvcConfigurationSupportè¿™ä¸ªç±»</p>
<p><img src="https://s1.ax1x.com/2022/04/25/LILQ4U.png" alt="LILQ4U.png"></p>
<p>â‘£å¦‚æœæ²¡æœ‰WebMvcConfigurationSupport,é‚£ä¹ˆä¼šåˆ›å»ºWebMvcAutoConfiguration,å¹¶ä¸”åœ¨æ„é€ æ–¹æ³•æ‰§è¡Œæ—¶å°†æ‰¾åˆ°resourcePropertieså¹¶èµ‹å€¼</p>
<p><img src="https://s1.ax1x.com/2022/04/25/LIL1CF.png" alt="LIL1CF.png"></p>
<p>â‘¤é€šè¿‡this.resourceProperties.getStaticLocationsè°ƒç”¨æ–¹æ³•,å¾—åˆ°ç±»ä¸­çš„é»˜è®¤èµ„æºå¸¸é‡æ·»åŠ åˆ°èµ„æºè·¯å¾„ä¸­</p>
<p><img src="https://s1.ax1x.com/2022/04/25/LILgbt.png" alt="LILgbt.png"></p>
<p>â‘¥é€šè¿‡Resourcesç±»ä¸­å¯ä»¥çœ‹åˆ°èµ„æºå¸¸é‡æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„å­˜å‚¨,æœ€ç»ˆèµ‹å€¼ç»™staticLocationsçš„å˜é‡,å¹¶ä¸”é€šè¿‡getæ–¹æ³•å¯ä»¥è·å–åˆ°</p>
<p><img src="https://s1.ax1x.com/2022/04/25/LILWUf.png" alt="LILWUf.png"></p>
<p><strong>æ€»ç»“:æ‰€ä»¥å½“æˆ‘ä»¬æ²¡æœ‰é€šè¿‡ç»§æ‰¿WebMvcConfigurationSupportçš„æ–¹å¼æ¥é…ç½®è‡ªå®šä¹‰é™æ€èµ„æºè®¿é—®è·¯å¾„æ—¶,é»˜è®¤è®¿é—®è·¯å¾„ä¸ºclasspath:&#x2F;resource&#x2F;,classpath:&#x2F;static&#x2F;,classpath:&#x2F;public&#x2F;</strong></p>
<h1 id="WebMvcConfigurationSupportå’ŒWebMvcConfigurationä»€ä¹ˆå…³ç³»"><a href="#WebMvcConfigurationSupportå’ŒWebMvcConfigurationä»€ä¹ˆå…³ç³»" class="headerlink" title="WebMvcConfigurationSupportå’ŒWebMvcConfigurationä»€ä¹ˆå…³ç³»?"></a>WebMvcConfigurationSupportå’ŒWebMvcConfigurationä»€ä¹ˆå…³ç³»?</h1><p>æŸ¥çœ‹æºç æ³¨é‡Šä¸ŠæŸ¥åˆ°çš„è§£é‡Šæ˜¯ï¼Œåœ¨springä¸­é…ç½®WebMvcæ—¶æœ‰ä¸¤ç§æ–¹æ³•ï¼Œ<br>1.ç»§æ‰¿WebMvcConfigurationSupportæˆ–è€…å­ç±»DelegatingWebMVcconfigurationï¼Œé‡å†™é‡Œé¢ç›¸åº”çš„æ–¹æ³•<br>2.ç»§æ‰¿WebMvcConfigurerçš„å­æŠ½è±¡ç±»WebMvcConfigurerAdapter(å·²ç»è¿‡æ—¶äº†)ï¼Œä¹Ÿæ˜¯é‡å†™é‡Œé¢ç›¸åº”çš„æ–¹æ³•ï¼Œä½†æ˜¯éœ€è¦åœ¨é…ç½®ç±»ä¸Šæ·»åŠ @EnableWebMvcæ³¨è§£ã€‚é‚£è¿™ä¸¤ä¸ªç±»ç›´æ¥æ˜¯ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ</p>
<p>3.å®ç°WebMvcConfigurer(å› ä¸º2å·²ç»è¿‡æ—¶äº†)ï¼Œä¹Ÿæ˜¯é‡å†™é‡Œé¢ç›¸åº”çš„æ–¹æ³•ï¼Œä½†æ˜¯éœ€è¦åœ¨é…ç½®ç±»ä¸Šæ·»åŠ @EnableWebMvcæ³¨è§£ã€‚</p>
<p>â€ƒâ€ƒç»†å¿ƒçš„å¼€å‘è€…ä¼šå‘ç°ï¼ŒWebMvcConfigurationSupportä¸­é‚£äº›å­ç±»å¯ä»¥é‡å†™çš„ç©ºæ–¹æ³•åœ¨WebMvcConfigureréƒ½æœ‰ï¼Œè¿™è¯´æ˜WebMvcConfigureråªæ˜¯WebMvcConfigurationSupportçš„ä¸€ä¸ªæ‰©å±•ç±»ï¼Œå®ƒå¹¶æ²¡æœ‰æ‰©å±•æ–°åŠŸèƒ½ï¼Œåªæ˜¯ä¸ºè®©ç”¨æˆ·æ›´æ–¹ä¾¿å®‰å…¨çš„æ·»åŠ è‡ªå®šä¹‰é…ç½®ï¼Œä¸ºä»€ä¹ˆè¯´æ˜¯å®‰å…¨å‘¢ï¼Ÿ<br>å› ä¸ºå¦‚æœç›´æ¥ç»§æ‰¿WebMvcConfigurationSupportï¼Œé‚£ä¹ˆç”¨æˆ·å¯ä»¥é‡å†™é»˜è®¤çš„é…ç½®ï¼Œå¦‚æœå¯¹åŸç†ä¸æ˜¯å¾ˆæ¸…æ¥šåœ°å¼€å‘è€…ä¸å°å¿ƒé‡å†™äº†é»˜è®¤çš„é…ç½®ï¼Œspringmvcå¯èƒ½ç›¸å…³åŠŸèƒ½å°±æ— æ³•ç”Ÿæ•ˆï¼Œæ˜¯ä¸€ç§ä¸å®‰å…¨çš„è¡Œä¸ºã€‚ä½†å¦‚æœæ˜¯ç»§æ‰¿WebMvcConfigurerAdapterï¼Œé‚£ä¹ˆå¼€å‘è€…æ˜¯åœ¨é»˜è®¤é…ç½®çš„åŸºç¡€ä¸Šæ·»åŠ è‡ªå®šä¹‰é…ç½®ï¼Œç›¸å¯¹æ¥è¯´æ›´å®‰å…¨ä¸€äº›ï¼Œåªä¸è¿‡è¦å¤šåŠ ä¸€ä¸ª@EnableWebMvcæ³¨è§£ã€‚ä»è¿™ä¸ªè§’åº¦æ¥è¯´ï¼Œæœ€ä½³å®è·µè¿˜æ˜¯ç»§æ‰¿WebMvcConfigurerAdapter</p>
<p><strong>ä¸ºä»€ä¹ˆWebMvcConfigurerå®ç°è¦åŠ @EnableWebMvc?</strong></p>
<blockquote>
<p>@EnableWebMvcæ³¨è§£ç±»ä¸Šå¯¼å…¥äº†DelegatingWebMvcConfigurationç±»ï¼Œè¯¥ç±»æ˜¯WebMvcConfigurationSupportçš„å­ç±»ï¼Œè¯¥ç±»é™¤äº†å®ä¾‹åŒ–WebMvcConfigurationSupportå®ä¾‹ä»¥å¤–ï¼Œå¦ä¸€ä¸ªä½œç”¨å°±æ˜¯æ”¶é›†BeanFactoryä¸­æ‰€æœ‰WebMvcConfigurerçš„å®ç°ï¼Œæ±‡é›†åˆ°WebMvcConfigurerCompositeä¸­ï¼Œåœ¨WebMvcConfigurationSupportå®ä¾‹åŒ–è¿‡ç¨‹ä¸­ä¼šåˆ†åˆ«è°ƒç”¨è¿™äº›å®ç°ï¼Œå°†ç›¸åº”çš„å®ä¾‹ä¼ å…¥è¿™äº›å®ç°ä¸­ï¼Œä¾›å¼€å‘è€…åœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ è‡ªå®šä¹‰çš„é…ç½®ã€‚è¿™ä¹Ÿå°±æ˜¯åœ¨WebMvcConfigurerAdapterå­ç±»ä¸Šè¦åŠ @EnableWebMvcçš„åŸå› ï¼Œå› ä¸ºè¦å…ˆå®ä¾‹åŒ–WebMvcConfigurationSupportã€‚*</p>
</blockquote>
<p><strong>ä¸ºä»€ä¹ˆå¯ä»¥å­˜åœ¨å¤šä¸ªWebMvcConfigurerçš„å®ç°?</strong></p>
<blockquote>
<p>â€ƒä¸€èˆ¬æ¥è®²ä¸€ä¸ªåº”ç”¨ä¸­ä¸€ä¸ªWebMvcConfigurerçš„å·²ç»è¶³å¤Ÿï¼Œè®¾è®¡æˆæ”¶é›†å¤šä¸ªæ˜¯ä¸æ˜¯æœ‰äº›å¤šä½™ï¼Ÿä»springbootçš„autoconfigureæœºåˆ¶æ¥çœ‹å¹¶ä¸å¤šä½™ï¼Œåè€Œæ›´çµæ´»ï¼Œæ¯”å¦‚æˆ‘è¦å†™ä¸€ä¸ªmybatisçš„AutoConfigurationå’ŒJPAçš„AutoConfigurationï¼Œæˆ‘å°±å¯ä»¥åœ¨ä¸åŒçš„AutoConfigurationé‡Œé¢å®šä¹‰ä¸€ä¸ªWebMvcConfigurerçš„å®ç°ï¼Œé‡Œé¢åªé…ç½®ä¸mybatisæˆ–JPAç›¸å…³çš„é…ç½®ï¼Œè¿™æ ·éœ€è¦é‚£ä¸ªå¯ç”¨é‚£ä¸ªï¼Œä¸éœ€è¦äººå·¥é€šè¿‡æ³¨é‡Šä»£ç æ¥è½¬æ¢mybatiså’ŒJPAï¼Œæ³¨æ„ï¼šåœ¨springbootä¸‹è‡ªå®šä¹‰çš„WebMvcConfigurerå®ç°é…ç½®ç±»ä¸Šæ˜¯ä¸éœ€è¦æ·»åŠ @EnableWebMvcçš„ï¼Œå› ä¸ºspringbootå·²ç»å®ä¾‹åŒ–äº†WebMvcConfigurationSupportï¼Œå¦‚æœæ·»åŠ äº†è¯¥æ³¨è§£ï¼Œé»˜è®¤çš„WebMvcConfigurationSupporté…ç½®ç±»æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ï¼Œä¹Ÿå°±æ˜¯ä»¥ç”¨æˆ·å®šä¹‰çš„ä¸ºä¸»ï¼Œä¸€èˆ¬å»ºè®®è¿˜æ˜¯ä¸è¦†ç›–é»˜è®¤çš„å¥½ã€‚</p>
</blockquote>

                
            </div>
        </article>
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2022/04/21/spring%E7%9A%84%E7%BB%86%E8%8A%82%E6%95%B4%E7%90%86/">springçš„ç»†èŠ‚æ•´ç†</a>
            </div>
            <p class="sub">Apr 21 2022</p>
            <div class="post-content">
                
                    <h1 id="springä¸­-Resourceå’Œ-Autowiredçš„åŒºåˆ«"><a href="#springä¸­-Resourceå’Œ-Autowiredçš„åŒºåˆ«" class="headerlink" title="springä¸­@Resourceå’Œ@Autowiredçš„åŒºåˆ«"></a>springä¸­@Resourceå’Œ@Autowiredçš„åŒºåˆ«</h1><blockquote>
<p>springä¸­ï¼Œ@Resourceå’Œ@Autowiredéƒ½æ˜¯åšbeançš„æ³¨å…¥æ—¶ä½¿ç”¨ã€‚ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæœ‰æ—¶å€™@Resource å’Œ @Autowiredå¯ä»¥æ›¿æ¢ä½¿ç”¨ï¼›æœ‰æ—¶ï¼Œåˆ™ä¸å¯ä»¥ã€‚<br>    ä¸‹é¢ï¼Œæ ¹æ®è‡ªå·±çš„å­¦ä¹ ï¼Œæ•´ç†ä¸‹è¿™ä¸¤ä¸ªæ³¨è§£ä½¿ç”¨ä¸­çš„å…±åŒç‚¹å’Œä¸åŒç‚¹ï¼ŒåŠç”¨æ³•ä¸Šçš„ä¸åŒã€‚<br>     å…±åŒç‚¹<br>     @Resourceå’Œ@Autowiredéƒ½å¯ä»¥ä½œä¸ºæ³¨å…¥å±æ€§çš„ä¿®é¥°ï¼Œåœ¨æ¥å£ä»…æœ‰å•ä¸€å®ç°ç±»æ—¶ï¼Œä¸¤ä¸ªæ³¨è§£çš„ä¿®é¥°æ•ˆæœç›¸åŒï¼Œå¯ä»¥äº’ç›¸æ›¿æ¢ï¼Œä¸å½±å“ä½¿ç”¨ã€‚<br>    ä¸åŒç‚¹<br>@Resourceæ˜¯Javaè‡ªå·±çš„æ³¨è§£ï¼Œ@Resourceæœ‰ä¸¤ä¸ªå±æ€§æ˜¯æ¯”è¾ƒé‡è¦çš„ï¼Œåˆ†æ˜¯nameå’Œtypeï¼›Springå°†@Resourceæ³¨è§£çš„nameå±æ€§è§£æä¸ºbeançš„åå­—ï¼Œè€Œtypeå±æ€§åˆ™è§£æä¸ºbeançš„ç±»å‹ã€‚æ‰€ä»¥å¦‚æœä½¿ç”¨nameå±æ€§ï¼Œåˆ™ä½¿ç”¨byNameçš„è‡ªåŠ¨æ³¨å…¥ç­–ç•¥ï¼Œè€Œä½¿ç”¨typeå±æ€§æ—¶åˆ™ä½¿ç”¨byTypeè‡ªåŠ¨æ³¨å…¥ç­–ç•¥ã€‚å¦‚æœæ—¢ä¸æŒ‡å®šnameä¹Ÿä¸æŒ‡å®štypeå±æ€§ï¼Œè¿™æ—¶å°†é€šè¿‡åå°„æœºåˆ¶ä½¿ç”¨byNameè‡ªåŠ¨æ³¨å…¥ç­–ç•¥ã€‚<br>@Autowiredæ˜¯springçš„æ³¨è§£ï¼Œæ˜¯spring2.5ç‰ˆæœ¬å¼•å…¥çš„ï¼ŒAutowiredåªæ ¹æ®typeè¿›è¡Œæ³¨å…¥ï¼Œä¸ä¼šå»åŒ¹é…nameã€‚å¦‚æœæ¶‰åŠåˆ°typeæ— æ³•è¾¨åˆ«æ³¨å…¥å¯¹è±¡æ—¶ï¼Œé‚£éœ€è¦ä¾èµ–@Qualifieræˆ–@Primaryæ³¨è§£ä¸€èµ·æ¥ä¿®é¥°ã€‚</p>
</blockquote>
<h1 id="BeanFactoryå’ŒFactoryBeançš„åŒºåˆ«"><a href="#BeanFactoryå’ŒFactoryBeançš„åŒºåˆ«" class="headerlink" title="BeanFactoryå’ŒFactoryBeançš„åŒºåˆ«"></a>BeanFactoryå’ŒFactoryBeançš„åŒºåˆ«</h1><p><strong>BeanFactoryæ˜¯ä¸ªFactoryï¼Œä¹Ÿå°±æ˜¯IOCå®¹å™¨æˆ–å¯¹è±¡å·¥å‚ï¼ŒFactoryBeanæ˜¯ä¸ªBeanã€‚åœ¨Springä¸­ï¼Œæ‰€æœ‰çš„Beanéƒ½æ˜¯ç”±BeanFactory(ä¹Ÿå°±æ˜¯IOCå®¹å™¨)æ¥è¿›è¡Œç®¡ç†çš„ã€‚ä½†å¯¹FactoryBeanè€Œè¨€ï¼Œè¿™ä¸ªBeanä¸æ˜¯ç®€å•çš„Beanï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½ç”Ÿäº§æˆ–è€…ä¿®é¥°å¯¹è±¡ç”Ÿæˆçš„å·¥å‚Bean,å®ƒçš„å®ç°ä¸è®¾è®¡æ¨¡å¼ä¸­çš„å·¥å‚æ¨¡å¼å’Œä¿®é¥°å™¨æ¨¡å¼ç±»ä¼¼</strong></p>
<blockquote>
<p>1.BeanFactory</p>
<p>BeanFactoryå®šä¹‰äº†IOCå®¹å™¨çš„æœ€åŸºæœ¬å½¢å¼ï¼Œå¹¶æä¾›äº†IOCå®¹å™¨åº”éµå®ˆçš„çš„æœ€åŸºæœ¬çš„æ¥å£ï¼Œä¹Ÿå°±æ˜¯Spring IOCæ‰€éµå®ˆçš„æœ€åº•å±‚å’Œæœ€åŸºæœ¬çš„ç¼–ç¨‹è§„èŒƒã€‚åœ¨Springä»£ç ä¸­ï¼ŒBeanFactoryåªæ˜¯ä¸ªæ¥å£ï¼Œå¹¶ä¸æ˜¯IOCå®¹å™¨çš„å…·ä½“å®ç°ï¼Œä½†æ˜¯Springå®¹å™¨ç»™å‡ºäº†å¾ˆå¤šç§å®ç°ï¼Œå¦‚ DefaultListableBeanFactoryã€XmlBeanFactoryã€ApplicationContextç­‰ï¼Œéƒ½æ˜¯é™„åŠ äº†æŸç§åŠŸèƒ½çš„å®ç°ã€‚</p>
<p>2.FactoryBean</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒSpringé€šè¿‡åå°„æœºåˆ¶åˆ©ç”¨<bean>çš„classå±æ€§æŒ‡å®šå®ç°ç±»å®ä¾‹åŒ–Beanï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå®ä¾‹åŒ–Beanè¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œå¦‚æœæŒ‰ç…§ä¼ ç»Ÿçš„æ–¹å¼ï¼Œåˆ™éœ€è¦åœ¨<bean>ä¸­æä¾›å¤§é‡çš„é…ç½®ä¿¡æ¯ã€‚é…ç½®æ–¹å¼çš„çµæ´»æ€§æ˜¯å—é™çš„ï¼Œè¿™æ—¶é‡‡ç”¨ç¼–ç çš„æ–¹å¼å¯èƒ½ä¼šå¾—åˆ°ä¸€ä¸ªç®€å•çš„æ–¹æ¡ˆã€‚Springä¸ºæ­¤æä¾›äº†ä¸€ä¸ªorg.springframework.bean.factory.FactoryBeançš„å·¥å‚ç±»æ¥å£ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å®ç°è¯¥æ¥å£å®šåˆ¶å®ä¾‹åŒ–Beançš„é€»è¾‘ã€‚<br>FactoryBeanæ¥å£å¯¹äºSpringæ¡†æ¶æ¥è¯´å ç”¨é‡è¦çš„åœ°ä½ï¼ŒSpringè‡ªèº«å°±æä¾›äº†70å¤šä¸ªFactoryBeançš„å®ç°ã€‚å®ƒä»¬éšè—äº†å®ä¾‹åŒ–ä¸€äº›å¤æ‚Beançš„ç»†èŠ‚ï¼Œç»™ä¸Šå±‚åº”ç”¨å¸¦æ¥äº†ä¾¿åˆ©ã€‚ä»Spring3.0å¼€å§‹ï¼ŒFactoryBeanå¼€å§‹æ”¯æŒæ³›å‹ï¼Œå³æ¥å£å£°æ˜æ”¹ä¸ºFactoryBean<T>çš„å½¢å¼</p>
</blockquote>
<h1 id="ä»€ä¹ˆæ˜¯JDBCTemplate"><a href="#ä»€ä¹ˆæ˜¯JDBCTemplate" class="headerlink" title="ä»€ä¹ˆæ˜¯JDBCTemplate?"></a>ä»€ä¹ˆæ˜¯JDBCTemplate?</h1><p><strong>springæ¡†æ¶å¯¹JDBCè¿›è¡Œå°è£…,ä½¿ç”¨JDBCTemplateæ–¹ä¾¿å®ç°å¯¹æ•°æ®åº“æ“ä½œ</strong></p>
<h1 id="springäº‹åŠ¡ç®¡ç†API"><a href="#springäº‹åŠ¡ç®¡ç†API" class="headerlink" title="springäº‹åŠ¡ç®¡ç†API"></a>springäº‹åŠ¡ç®¡ç†API</h1><p><strong>springæä¾›ä¸€ä¸ªPlatformTransactionManageræ¥å£,ä»£è¡¨äº‹åŠ¡ç®¡ç†å™¨,è¿™ä¸ªæ¥å£é’ˆå¯¹ä¸åŒæ“ä½œæ•°æ®åº“çš„æ¡†æ¶æä¾›ä¸åŒçš„å®ç°ç±»</strong></p>
<p>[<img src="https://s1.ax1x.com/2022/04/21/LgAMz4.md.png" alt="LgAMz4.md.png"></p>
<p>å¦‚:DataSourceTransactionManageré’ˆå¯¹çš„æ˜¯æ•´åˆçš„æ˜¯mybatisæ¡†æ¶å’ŒJDBCTemplate(jdbcæ¨¡æ¿)</p>
<p>â€‹    HibernateTransactionManageré’ˆå¯¹çš„æ˜¯Hibernateæ¡†æ¶ç­‰ç­‰â€¦</p>
<h1 id="Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹pripagation-äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º"><a href="#Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹pripagation-äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º" class="headerlink" title="@Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹pripagation:äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º"></a>@Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹pripagation:äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º</h1><p>1)å¤šäº‹åŠ¡æ–¹æ³•ç›´æ¥è¿›è¡Œè°ƒç”¨,è¿™ä¸ªè¿‡ç¨‹ä¸­äº‹åŠ¡æ˜¯å¦‚ä½•è¿›è¡Œç®¡ç†çš„</p>
<p>2)ä¸€å…±ä¸ƒä¸ªå‚æ•°,ä¸»è¦è®°ä½Requiredså’ŒRequired_Newè¿™ä¸¤ä¸ª</p>
<p><strong>è¯¦è§springæ€»ç»“ç« </strong></p>
<h1 id="Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹ioslation-äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"><a href="#Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹ioslation-äº‹åŠ¡çš„éš”ç¦»çº§åˆ«" class="headerlink" title="@Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹ioslation:äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"></a>@Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹ioslation:äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</h1><p>1)äº‹åŠ¡ç‰¹æ€§æœ‰éš”ç¦»æ€§,å¤šäº‹åŠ¡æ“ä½œä¹‹é—´ä¸ä¼šäº§ç”Ÿå½±å“.ä¸è€ƒè™‘éš”ç¦»æ€§äº§ç”Ÿå¾ˆå¤šé—®é¢˜</p>
<p>2)æœ‰ä¸‰ä¸ªè¯»é—®é¢˜:<strong>è„è¯»â€”-ä¸å¯é‡å¤è¯»â€”-å¹»(è™š)è¯»</strong></p>
<ul>
<li><p>è„è¯»:ä¸€ä¸ªæœªæäº¤äº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªæœªæäº¤äº‹åŠ¡çš„æ•°æ®</p>
</li>
<li><p>ä¸å¯é‡å¤è¯»:ä¸€ä¸ªä¸ºæäº¤äº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªæäº¤äº‹åŠ¡ä¿®æ”¹æ•°æ®(mysqléš”ç¦»çº§åˆ«é»˜è®¤å¯é‡å¤è¯»)</p>
</li>
<li><p>å¹»è¯»: ä¸€ä¸ªæœªæäº¤äº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªæäº¤äº‹åŠ¡æ·»åŠ æ•°æ®</p>
<p>è§£å†³æ–¹æ¡ˆ:  é€šè¿‡è®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«,è§£å†³è¯»é—®é¢˜.(1,4åŸºæœ¬ä¸ç”¨)</p>
<p>[<img src="https://s1.ax1x.com/2022/04/21/LgAKWF.md.png" alt="LgAKWF.md.png"></p>
</li>
</ul>
<h1 id="Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹timeout-äº‹åŠ¡çš„è¶…æ—¶æ—¶é—´"><a href="#Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹timeout-äº‹åŠ¡çš„è¶…æ—¶æ—¶é—´" class="headerlink" title="@Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹timeout:äº‹åŠ¡çš„è¶…æ—¶æ—¶é—´"></a>@Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹timeout:äº‹åŠ¡çš„è¶…æ—¶æ—¶é—´</h1><p>1)äº‹åŠ¡éœ€è¦åœ¨ä¸€å®šæ—¶é—´å†…è¿›è¡Œæäº¤,å¦‚æœä¸æäº¤åˆ™è¿›è¡Œå›æ»š</p>
<p>2)é»˜è®¤å€¼æ˜¯-1,è®¾ç½®æ—¶é—´ä»¥ç§’ä¸ºå•ä½è¿›è¡Œè®¡ç®—(-1ä»£è¡¨ä¸é™è¶…æ—¶æ—¶é—´)</p>
<h1 id="Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹readOnly-æ˜¯å¦åªè¯»"><a href="#Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹readOnly-æ˜¯å¦åªè¯»" class="headerlink" title="@Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹readOnly:æ˜¯å¦åªè¯»"></a>@Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹readOnly:æ˜¯å¦åªè¯»</h1><p>1)è¯»:æŸ¥è¯¢æ“ä½œ,å†™:æ·»åŠ ä¿®æ”¹åˆ é™¤æ“ä½œ</p>
<p>2)readOnlyé»˜è®¤å€¼æ˜¯false,è¡¨ç¤ºå¯ä»¥è¿›è¡ŒæŸ¥è¯¢,å¯ä»¥æ·»åŠ ä¿®æ”¹åˆ é™¤æ“ä½œ</p>
<p>3)è®¾ç½®readOnlyå€¼æ˜¯true,è®¾ç½®æˆtrueä¹‹å,åªèƒ½æŸ¥è¯¢</p>
<h1 id="Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹rollbackForå’ŒnoRollbackfor-å›æ»šå’Œä¸å›æ»š"><a href="#Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹rollbackForå’ŒnoRollbackfor-å›æ»šå’Œä¸å›æ»š" class="headerlink" title="@Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹rollbackForå’ŒnoRollbackfor:å›æ»šå’Œä¸å›æ»š"></a>@Transactionä¸­çš„å…­å¤§å±æ€§ä¹‹rollbackForå’ŒnoRollbackfor:å›æ»šå’Œä¸å›æ»š</h1><p>1)è®¾ç½®æŸ¥è¯¢é‚£äº›å¼‚å¸¸è¿›è¡Œäº‹åŠ¡å›æ»š</p>
<p>2)@Transactioné»˜è®¤åªå¯¹RuntimeExceptionè¿›è¡Œå›æ»š,å¦‚æœæ˜¯ç¼–è¯‘æ—¶æœŸå¼‚å¸¸åˆ™éœ€è¦æ‰‹åŠ¨è®¾ç½®</p>
<p><strong>æ³¨:ä¸è¦æ‰‹åŠ¨æŠ“å¼‚å¸¸(dont try catch!!!!)ä¸ç„¶ä¼šå›æ»šå¤±æ•ˆ,è¯¦è§springæ€»ç»“çš„æ–‡ç« !</strong></p>
<h1 id="è¿‡æ»¤å™¨Filterå’Œæ‹¦æˆªå™¨Interceptorçš„åŒºåˆ«"><a href="#è¿‡æ»¤å™¨Filterå’Œæ‹¦æˆªå™¨Interceptorçš„åŒºåˆ«" class="headerlink" title="è¿‡æ»¤å™¨Filterå’Œæ‹¦æˆªå™¨Interceptorçš„åŒºåˆ«"></a>è¿‡æ»¤å™¨Filterå’Œæ‹¦æˆªå™¨Interceptorçš„åŒºåˆ«</h1><ul>
<li><p>æ¥å£æ–¹é¢çš„åŒºåˆ«</p>
<blockquote>
<p>è¿‡æ»¤å™¨å®ç°çš„æ˜¯Filteræ¥å£,æ‹¦æˆªå™¨å®ç°çš„æ˜¯HandlerInterceptoræ¥å£</p>
<p>Filterâ€”â€“&gt;Servletæä¾›             HandlerInterceptorâ€”â€”&gt;springæä¾›    </p>
</blockquote>
</li>
<li><p>æ–¹æ³•å±‚é¢çš„åŒºåˆ«</p>
</li>
<li><blockquote>
<p>è¿‡æ»¤å™¨çš„å‰åè¿‡æ»¤æ˜¯åœ¨doFilteræ–¹æ³•å†…å®Œæˆçš„</p>
<p>æ‹¦æˆªå™¨æä¾›ä¸‰ä¸ªæ–¹æ³•preHandle,postHandle,afterCompletion</p>
</blockquote>
</li>
<li><p>æ”¾è¡Œçš„åŒºåˆ«</p>
</li>
<li><blockquote>
<p>è¿‡æ»¤å™¨è°ƒç”¨filterChain.doFilterçš„æ—¶å€™æ”¾è¡Œ</p>
<p>æ‹¦æˆªå™¨éœ€è¦åœ¨preHandlerä¸­è¿”å›trueè¡¨ç¤ºæ”¾è¡Œ,falseè¡¨ç¤ºä¸æ”¾è¡Œ</p>
</blockquote>
</li>
<li><p>è¢«ç®¡ç†æ–¹å¼çš„åŒºåˆ«</p>
<blockquote>
<p>è¿‡æ»¤å™¨æ˜¯tomcatåˆ›å»ºç®¡ç†</p>
<p>æ‹¦æˆªå™¨æ˜¯springåˆ›å»ºç®¡ç†çš„</p>
<p><strong>æ³¨æ„:å¦‚æœç”¨springboot,é‚£ä¹ˆéƒ½æ˜¯springç®¡ç†,åº”ä¸ºtomcatå·²ç»è¢«å†…ç½®äº†,ä¸»å¯¼æƒåœ¨spring</strong></p>
</blockquote>
</li>
<li><p>ç®¡ç†èŒƒå›´çš„åŒºåˆ«(ä»…é™äºä½¿ç”¨springbootä¹‹å‰)</p>
<blockquote>
<p>è¿‡æ»¤å™¨èŒƒå›´å¤§,æ‹¦æˆªå™¨èŒƒå›´å°,ä½†æ˜¯åœ¨springbootä¸­æ˜¯ä¸€æ ·å¤§,å› ä¸ºæ‰€æœ‰çš„beanéƒ½æ˜¯springç®¡ç†</p>
</blockquote>
</li>
</ul>
<h1 id="ApplicationContextæ˜¯ä»€ä¹ˆ"><a href="#ApplicationContextæ˜¯ä»€ä¹ˆ" class="headerlink" title="ApplicationContextæ˜¯ä»€ä¹ˆ"></a>ApplicationContextæ˜¯ä»€ä¹ˆ</h1><p>å¦‚æœè¯´BeanFactoryæ˜¯Springçš„å¿ƒè„ï¼Œé‚£ä¹ˆApplicationContextå°±æ˜¯å®Œæ•´çš„èº«èº¯äº†ã€‚</p>
<p>ApplicationContextç”±BeanFactoryæ´¾ç”Ÿè€Œæ¥ï¼Œæä¾›äº†æ›´å¤šé¢å‘å®é™…åº”ç”¨çš„åŠŸèƒ½ã€‚</p>
<p>Contextæˆ‘ä»¬é€šå¸¸è§£é‡Šä¸ºä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œç”¨â€œå®¹å™¨â€æ¥è¡¨è¿°å®ƒæ›´å®¹æ˜“ç†è§£ä¸€äº›ï¼ŒApplicationContextåˆ™æ˜¯â€œåº”ç”¨çš„å®¹å™¨â€</p>
<h1 id="å„ç§ä¾èµ–"><a href="#å„ç§ä¾èµ–" class="headerlink" title="å„ç§ä¾èµ–"></a>å„ç§ä¾èµ–</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--validationæ ¡éªŒæ¡†æ¶èµ·æ­¥ä¾èµ–--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;!--lombok--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;!--åŠ å…¥è¿ç»´å·¥å…·ä¾èµ–--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">  </span><br><span class="line">   &lt;!--pagehelper--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;pagehelper-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">1.3</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;!--åˆ‡ç‚¹è¡¨è¾¾å¼--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;!--jackson--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h1 id="application-ymlé…ç½®æ–‡ä»¶"><a href="#application-ymlé…ç½®æ–‡ä»¶" class="headerlink" title="application.ymlé…ç½®æ–‡ä»¶"></a>application.ymlé…ç½®æ–‡ä»¶</h1><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è®¾ç½®ç«¯å£å·</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®æ•°æ®æº</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/brand_demo?serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">  <span class="attr">main:</span></span><br><span class="line">    <span class="attr">allow-circular-references:</span> <span class="literal">true</span> <span class="comment"># è¿è¡Œsetæ–¹å¼å¾ªç¯ä¾èµ–</span></span><br><span class="line">   <span class="attr">sql:</span> <span class="comment">#sqlè¯­å¥åˆå§‹åŒ–,ç”¨äºæµ‹è¯•çš„æ—¶å€™</span></span><br><span class="line">    <span class="attr">init:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">always</span></span><br><span class="line">      <span class="attr">schema-locations:</span> <span class="string">classpath:scheme.sql</span> <span class="comment">#å¦‚æœåç§°æ˜¯shcema.sqlå°±ä¸ç”¨é…ç½®</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">data-locations:</span> <span class="string">classpath:data.sql</span> <span class="comment">#å¦‚æœåç§°æ˜¯data.sqlå°±ä¸ç”¨é…ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># mybatisé…ç½®</span></span><br><span class="line"><span class="comment"># å¼€å¯é©¼å³°å‘½å</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é…ç½®springbootæ—¥å¿—çº§åˆ«ï¼Œè¾“å‡ºè¿è¡Œè¿‡ç¨‹ä¸­çš„SQLè¯­å¥</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.itheima.mapper:</span> <span class="string">debug</span></span><br><span class="line">    <span class="attr">org.springframework.jdbc.support.JdbcTransactionManager:</span> <span class="string">debug</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ†é¡µåˆç†åŒ–</span></span><br><span class="line"><span class="attr">pagehelper:</span></span><br><span class="line">  <span class="attr">reasonable:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoint:</span></span><br><span class="line">    <span class="attr">health:</span></span><br><span class="line">      <span class="attr">show-details:</span> <span class="string">always</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">#è®¾ç½®mybatisçš„é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span>      </span><br><span class="line">    </span><br><span class="line"> <span class="comment">#è®¾ç½®mybatis-pluså…¨å±€é…ç½®   </span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">tb_</span>  <span class="comment">#è®¾ç½®è¡¨åå‰ç¼€ä¸ºtb_</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span>  <span class="comment">#è®¾ç½®ä¸»é”®æŒ‰è‡ªåŠ¨å¢é•¿èµ‹å€¼(é»˜è®¤ä¸ºé›ªèŠ±ç®—æ³•,é€‚åˆåˆ†å¸ƒå¼æ•°æ®åº“é¡¹ç›®)</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span>     <span class="comment">#logæ˜¾ç¤ºsqlè¯­å¥</span></span><br></pre></td></tr></table></figure>

<h1 id="ä¹è§‚é”"><a href="#ä¹è§‚é”" class="headerlink" title="ä¹è§‚é”"></a>ä¹è§‚é”</h1><p>CAS  æ¯”è¾ƒå¹¶è®¾ç½®   version</p>

                
            </div>
        </article>
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2022/04/15/%E5%85%B3%E4%BA%8E%E5%AD%A6%E4%B9%A0Spring%E7%9A%84%E6%80%BB%E7%BB%93%E5%92%8C%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/">Springçš„æ€»ç»“å’Œä¸€äº›é—®é¢˜</a>
            </div>
            <p class="sub">Apr 15 2022</p>
            <div class="post-content">
                
                    <h2 id="Springè§£è€¦"><a href="#Springè§£è€¦" class="headerlink" title="Springè§£è€¦"></a>Springè§£è€¦</h2><p>Springçš„ä¸€å¤§ä½œç”¨å°±æ˜¯èƒ½å¤Ÿé™ä½ä»£ç è€¦åˆ,è®©ç¨‹åºçš„æ‰©å±•æ€§æ›´å¥½.</p>
<h1 id="Springçš„æ³¨è§£"><a href="#Springçš„æ³¨è§£" class="headerlink" title="Springçš„æ³¨è§£"></a>Springçš„æ³¨è§£</h1><blockquote>
<ul>
<li><p>å°†è‡ªå®šä¹‰Beanäº¤ç»™Springç®¡ç†å¯ä»¥ä½¿ç”¨å“ªäº›æ³¨è§£ï¼Ÿ</p>
<p>@component  ä½œç”¨:æŠŠæ ‡æ³¨æ­¤æ³¨è§£çš„ç±»äº¤ç»™Springå®¹å™¨æ¥åˆ›å»ºå¯¹è±¡</p>
<p>@Controller    ä½œç”¨:æŠŠæ ‡æ³¨æ­¤æ³¨è§£çš„ç±»äº¤ç»™Springå®¹å™¨æ¥åˆ›å»ºå¯¹è±¡(ç”¨åœ¨controllerå±‚)</p>
<p>@Service         ä½œç”¨:æŠŠæ ‡æ³¨æ­¤æ³¨è§£çš„ç±»äº¤ç»™Springå®¹å™¨æ¥åˆ›å»ºå¯¹è±¡(ç”¨åœ¨serviceå±‚)</p>
<p>@Repository    ä½œç”¨:æŠŠæ ‡æ³¨æ­¤æ³¨è§£çš„ç±»äº¤ç»™Springå®¹å™¨æ¥åˆ›å»ºå¯¹è±¡ï¼ˆéƒ½æ˜¯ç”±Springå†…ç½®çš„mybatisæ¥åˆ›å»ºæ‰€ä»¥åŸºæœ¬ä¸ç”¨ï¼‰(ç”¨åœ¨daoå±‚)</p>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Beançš„èŒƒå›´</li>
</ul>
</blockquote>
<blockquote>
<p> @Scope</p>
</blockquote>
<blockquote>
<ul>
<li><p>@Autowiredå’Œ@Valueæ³¨è§£æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<p>@Autowired    ä½œç”¨:ä»Springå®¹å™¨ä¸­,æ ¹æ®æˆå‘˜å˜é‡ç±»å‹æ‰¾ä¸€ä¸ªå¯¹è±¡,ç„¶åèµ‹å€¼ç»™è¯¥æˆå‘˜å˜é‡,å¯ä»¥ä½¿ç”¨åœ¨æˆå‘˜å˜é‡ã€æˆå‘˜setæ–¹æ³•ã€æ„é€ æ–¹æ³•å‚æ•°ä¸Š</p>
<p>@Valueåªèƒ½ä½¿ç”¨åœ¨æˆå‘˜å˜é‡ï¼Œè¿˜å¯ä»¥ç»“åˆELè¡¨è¾¾å¼è·å–é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§å‚æ•°</p>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><p>ç”¨ä»€ä¹ˆæ³¨è§£å®šä¹‰åˆ‡é¢ç±»ï¼ŸSpringé€šçŸ¥æœ‰å‡ ç§ï¼Ÿ</p>
<p>@Aspect                 ä½œç”¨:æ³¨è§£ç”¨æ¥å®šä¹‰åˆ‡é¢ç±»</p>
<p>@Around                ä½œç”¨:ç¯ç»•é€šçŸ¥</p>
<p>@Before                  ä½œç”¨:å‰ç½®é€šçŸ¥ï¼Œåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰æ‰§è¡Œ</p>
<p>@AfterReturning      ä½œç”¨:åç½®é€šçŸ¥ï¼Œåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œåï¼Œä¸”æ²¡æœ‰å¼‚å¸¸æ—¶æ‰æ‰§è¡Œ</p>
<p>@AfterThrowing      ä½œç”¨:å¼‚å¸¸é€šçŸ¥ï¼Œåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œåï¼Œä¸”å‡ºç°å¼‚å¸¸æ—¶æ‰æ‰§è¡Œ</p>
<p>@After                     ä½œç”¨:æœ€ç»ˆé€šçŸ¥ï¼Œåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œåï¼Œä¸”æ— è®ºæ˜¯å¦å‡ºç°å¼‚å¸¸éƒ½æ‰§è¡Œ</p>
</li>
</ul>
</blockquote>
<h1 id="AOPå¸¸ç”¨æœ¯è¯­"><a href="#AOPå¸¸ç”¨æœ¯è¯­" class="headerlink" title="AOPå¸¸ç”¨æœ¯è¯­"></a>AOPå¸¸ç”¨æœ¯è¯­</h1><p>1)åˆ‡é¢:å°±æ˜¯é‚£äº›é‡å¤çš„,å…¬å…±çš„,é€šç”¨çš„åŠŸèƒ½ç§°ä¸ºåˆ‡é¢,ä¾‹å¦‚:æ—¥å¿—,äº‹åŠ¡,æƒé™</p>
<p>2)è¿æ¥ç‚¹:å°±æ˜¯ç›®æ ‡æ–¹æ³•,å› ä¸ºåœ¨ç›®æ ‡æ–¹æ³•ä¸­è¦å®ç°ç›®æ ‡æ–¹æ³•çš„åŠŸèƒ½å’Œåˆ‡é¢åŠŸèƒ½</p>
<p>3)åˆ‡å…¥ç‚¹(Pointcut):æ¥æŒ‡å®šåˆ‡å…¥çš„ä½ç½®,å¤šä¸ªè¿æ¥ç‚¹æ„æˆåˆ‡å…¥ç‚¹,åˆ‡å…¥ç‚¹å¯ä»¥æ˜¯ä¸€ä¸ªç›®æ ‡æ–¹æ³•,å¯ä»¥æ˜¯ä¸€ä¸ªç±»ä¸­æ‰€æœ‰æ–¹æ³•,å¯ä»¥æ˜¯æŸä¸ªåŒ…ä¸‹çš„æ‰€æœ‰ç±»ä¸­çš„æ–¹æ³•.</p>
<p>4)ç›®æ ‡å¯¹è±¡:æ“ä½œè°,è°å°±æ˜¯ç›®æ ‡å¯¹è±¡.</p>
<p>5)é€šçŸ¥(Advice):æ¥æŒ‡å®šåˆ‡å…¥çš„æ—¶æœº,æ˜¯åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰è¿˜æ˜¯æ‰§è¡Œåè¿˜æ˜¯å‡ºé”™æ—¶,è¿˜æ˜¯ç¯ç»•ç›®æ ‡æ–¹æ³•åˆ‡å…¥åˆ‡é¢åŠŸèƒ½.</p>
<h1 id="ä»€ä¹ˆæ˜¯AspectJæ¡†æ¶"><a href="#ä»€ä¹ˆæ˜¯AspectJæ¡†æ¶" class="headerlink" title="ä»€ä¹ˆæ˜¯AspectJæ¡†æ¶"></a>ä»€ä¹ˆæ˜¯AspectJæ¡†æ¶</h1><p>1.Springæ¡†æ¶ä¸€èˆ¬éƒ½æ˜¯åŸºäºAspectJå®ç°Aopæ“ä½œ</p>
<p>2AspectJä¸æ˜¯springç»„æˆéƒ¨åˆ†,ç‹¬ç«‹AOPæ¡†æ¶,ä¸€èˆ¬å§AspectJå’ŒSpringæ¡†æ¶ä¸€èµ·ä½¿ç”¨,è¿›è¡Œaopæ“ä½œ.</p>
<p>3.AspectJæ˜¯ä¸€ä¸ªä¼˜ç§€çš„é¢å‘åˆ‡é¢çš„æ¡†æ¶,å®ƒæ‰©å±•äº†JAVAè¯­è¨€,æä¾›äº†å¼ºå¤§çš„åˆ‡é¢å®ç°.å®ƒå› ä¸ºæ˜¯åŸºäºjavaè¯­è¨€å¼€å‘çš„,æ‰€ä»¥æ— ç¼æ‰©å±•.</p>
<h1 id="AspectJå¸¸è§é€šçŸ¥ç±»å‹"><a href="#AspectJå¸¸è§é€šçŸ¥ç±»å‹" class="headerlink" title="AspectJå¸¸è§é€šçŸ¥ç±»å‹"></a>AspectJå¸¸è§é€šçŸ¥ç±»å‹</h1><ul>
<li>AspectJä¸­å¸¸ç”¨çš„é€šçŸ¥æœ‰å››ç§ç±»å‹:</li>
</ul>
<p>1)å‰ç½®é€šçŸ¥@Before</p>
<p>2)åç½®é€šçŸ¥@AfterReturning</p>
<p>3)å¼‚å¸¸é€šçŸ¥@AfterThrowing</p>
<p>4)ç¯ç»•é€šçŸ¥@Around</p>
<p>5)æœ€ç»ˆé€šçŸ¥@After</p>
<p>6)å®šä¹‰åˆ‡å…¥ç‚¹@Pointcut(äº†è§£) </p>
<h1 id="AspectJ-çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼ˆæŒæ¡ï¼‰"><a href="#AspectJ-çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼ˆæŒæ¡ï¼‰" class="headerlink" title="AspectJ çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼ˆæŒæ¡ï¼‰"></a>AspectJ çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼ˆæŒæ¡ï¼‰</h1><p>è§„èŒƒçš„å…¬å¼ï¼š<br>execution(è®¿é—®æƒé™ æ–¹æ³•è¿”å›å€¼ æ–¹æ³•å£°æ˜ï¼ˆå‚æ•°ã€‰å¼‚å¸¸ç±»å‹ï¼‰<br>ç®€åŒ–åçš„å…¬å¼ï¼š<br>execution(æ–¹æ³•è¿”å›å€¼ æ–¹æ³•å£°æ˜ï¼ˆå‚æ•°ï¼‰ï¼‰<br>ç”¨åˆ°çš„ç¬¦å·ï¼š</p>
<p>*ä»£ç ä»»æ„ä¸ªä»»æ„çš„å­—ç¬¦(é€šé…ç¬¦ï¼‰<br>..å¦‚æœå‡ºç°åœ¨æ–¹æ³•çš„å‚æ•°ä¸­,åˆ™ä»£è¡¨ä»»æ„å‚æ•°<br>å¦‚æœå‡ºç°åœ¨è·¯å¾„ä¸­,åˆ™ä»£è¡¨æœ¬è·¯å¾„åŠå…¶æ‰€æœ‰çš„å­è·¯å¾„</p>
<h1 id="Beançš„ä½œç”¨åŸŸ-scope"><a href="#Beançš„ä½œç”¨åŸŸ-scope" class="headerlink" title="Beançš„ä½œç”¨åŸŸ(scope)"></a>Beançš„ä½œç”¨åŸŸ(scope)</h1><p>åœ¨ç±»ä¸Šä½¿ç”¨@scopeæ³¨è§£å®šä¹‰Beançš„ä½œç”¨åŸŸ,Springæ”¯æŒäº”ç§ä½œç”¨åŸŸ,åä¸‰ç§åœ¨webç¯å¢ƒæ‰ç”Ÿæ•ˆ.</p>
<ul>
<li><blockquote>
<p>@scope(â€œsingletonâ€) - å®¹å™¨å†…åŒ id çš„ bean åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼ˆé»˜è®¤ï¼‰ </p>
</blockquote>
</li>
<li><blockquote>
<p>@scope(â€œprototypeâ€) - æ¯æ¬¡ä½¿ç”¨è¯¥ bean æ—¶ä¼šåˆ›å»ºæ–°çš„å®ä¾‹</p>
</blockquote>
</li>
<li><p>@scope(â€œrequestâ€) - åœ¨ web ç¯å¢ƒä¸­ï¼Œæ¯ä¸ªè¯·æ±‚èŒƒå›´å†…ä¼šåˆ›å»ºæ–°çš„å®ä¾‹</p>
</li>
<li><p>@scope(â€œsessionâ€) - åœ¨ web ç¯å¢ƒä¸­ï¼Œæ¯ä¸ªä¼šè¯èŒƒå›´å†…ä¼šåˆ›å»ºæ–°çš„å®ä¾‹</p>
</li>
<li><p>@scope(â€œapplicationâ€)- åœ¨ web ç¯å¢ƒä¸­ï¼Œæ¯ä¸ªåº”ç”¨èŒƒå›´å†…ä¼šåˆ›å»ºæ–°çš„å®ä¾‹</p>
<ul>
<li>æ³¨:singletonå’ŒprototypeåŒºåˆ«</li>
</ul>
<p>ç¬¬ä¸€ ,singletonå•å®ä¾‹,protptypeå¤šå®ä¾‹</p>
<p>ç¬¬äºŒ,è®¾ç½®scopeå€¼æ˜¯singletonæ—¶å€™,åŠ è½½springé…ç½®æ–‡ä»¶æ—¶å°±ä¼šåˆ›å»ºå•å®ä¾‹å¯¹è±¡</p>
<p>â€‹        è®¾ç½®scpeå€¼æ˜¯prototypeæ—¶å€™,ä¸æ˜¯åœ¨åŠ è½½springé…ç½®æ–‡ä»¶çš„æ—¶å€™åˆ›å»ºå¯¹è±¡,</p>
<p>åœ¨è°ƒç”¨getBeanæ–¹æ³•æ—¶å€™åˆ›å»ºå¤šå®ä¾‹å¯¹è±¡</p>
</li>
</ul>
<h1 id="Beançš„ç”Ÿå‘½å‘¨æœŸ"><a href="#Beançš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Beançš„ç”Ÿå‘½å‘¨æœŸ"></a>Beançš„ç”Ÿå‘½å‘¨æœŸ</h1><blockquote>
<p> 1.ç”Ÿå‘½å‘¨æœŸ</p>
<p>â€‹    ä»å¯¹è±¡åˆ›å»ºåˆ°å¯¹è±¡é”€æ¯çš„è¿‡ç¨‹</p>
<p>2.beanç”Ÿå‘½å‘¨æœŸçš„ä¸ƒæ­¥</p>
<p>â€‹    1).é€šè¿‡æ„é€ å™¨åˆ›å»ºbeanå®ä¾‹(æ— å‚æ•°æ„é€ )</p>
<p>â€‹    2).ä¸ºbeançš„å±æ€§è®¾ç½®å€¼å’Œå¯¹å…¶ä»–beanå¼•ç”¨(è°ƒç”¨setæ–¹æ³•)</p>
<p>â€‹    2.1)æŠŠbeanå®ä¾‹ä¼ é€’beanåç½®å¤„ç†å™¨çš„æ–¹æ³•postProcessBeforeInitialization</p>
<p>â€‹    3).è°ƒç”¨beançš„åˆå§‹åŒ–çš„æ–¹æ³•(éœ€è¦è¿›è¡Œé…ç½®åˆå§‹åŒ–çš„æ–¹æ³•)</p>
<p>â€‹     3.1)æŠŠbeanå®ä¾‹ä¼ é€’beanåç½®å¤„ç†å™¨çš„æ–¹æ³•postProcessAfterInitialization</p>
<p>â€‹    4).beanå¯ä»¥ä½¿ç”¨äº†(å¯¹è±¡è·å–åˆ°äº†)<br>â€‹    5).å½“å®¹å™¨å…³é—­çš„æ—¶å€™,è°ƒç”¨beançš„é”€æ¯çš„æ–¹æ³•(éœ€è¦è¿›è¡Œé…ç½®é”€æ¯æ–¹æ³•)</p>
<p>3.åç½®å¤„ç†å™¨å¦‚ä½•åˆ›å»º</p>
<p>   åˆ›å»ºç±»,å®ç°æ¥å£beanpostProcessor,åˆ›å»ºåç½®å¤„ç†å™¨</p>
</blockquote>
<ul>
<li>æ ‡æ³¨äº†&#x3D;&#x3D;<strong>@PostConstruct</strong>&#x3D;&#x3D;çš„æ–¹æ³•æ˜¯åˆå§‹åŒ–æ–¹æ³•,ä¼š&#x3D;&#x3D;<strong>åœ¨beanå®ä¾‹è¢«åˆ›å»ºä¹‹å</strong>&#x3D;&#x3D;è°ƒç”¨.</li>
<li>æ ‡æ³¨äº†**@PreDestroy** çš„æ–¹æ³•æ˜¯é”€æ¯æ–¹æ³•,**&#x3D;&#x3D;singletonèŒƒå›´çš„bean&#x3D;&#x3D;**çš„é”€æ¯æ–¹æ³•ä¼šåœ¨Spring&#x3D;&#x3D;åœ¨å®¹å™¨å…³é—­å‰è¢«è°ƒç”¨&#x3D;&#x3D;.</li>
<li>å»¶è¿Ÿåˆå§‹åŒ–<ul>
<li>é»˜è®¤æƒ…å†µä¸‹singletonèŒƒå›´çš„beanæ˜¯å®¹å™¨åˆ›å»ºæ—¶å°±ä¼š&#x3D;&#x3D;<strong>åˆ›å»º</strong>&#x3D;&#x3D;</li>
<li>å¦‚æœå¸Œæœ›&#x3D;&#x3D;<strong>ç”¨åˆ°æ—¶æ‰åˆ›å»º</strong>&#x3D;&#x3D;,å¯ä»¥ä½¿ç”¨ &#x3D;&#x3D;<strong>@Lazy</strong>&#x3D;&#x3D; æ³¨è§£æ ‡æ³¨åœ¨ç±»ä¸Šæ¥å»¶è¿Ÿåˆ›å»º(æ‡’æ±‰å•ä¾‹)</li>
</ul>
</li>
</ul>
<h1 id="æ‰©å±•-è¿”å›æ•°æ®åº“è‡ªå¢é•¿é”®å€¼æ³¨è§£"><a href="#æ‰©å±•-è¿”å›æ•°æ®åº“è‡ªå¢é•¿é”®å€¼æ³¨è§£" class="headerlink" title="æ‰©å±•:è¿”å›æ•°æ®åº“è‡ªå¢é•¿é”®å€¼æ³¨è§£"></a>æ‰©å±•:è¿”å›æ•°æ®åº“è‡ªå¢é•¿é”®å€¼æ³¨è§£</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Options(useGeneratedKeys = true,keyProperty = &quot;id&quot;)</span>  éœ€è¦æ•°æ®åº“è‡ªå¢é•¿çš„é”®å€¼</span><br></pre></td></tr></table></figure>

<h1 id="æ‰©å±•-åˆå§‹åŒ–åº“"><a href="#æ‰©å±•-åˆå§‹åŒ–åº“" class="headerlink" title="æ‰©å±•:åˆå§‹åŒ–åº“"></a>æ‰©å±•:åˆå§‹åŒ–åº“</h1><p>æŠŠDDLå’ŒDMLçš„sqlåˆ†åˆ«å­˜å‚¨äºresourcesä¸‹çš„schema.sqlå’Œdata.sqlè¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­,ç„¶ååœ¨application.propertiesä¸­é…ç½®</p>
<blockquote>
<p>spring.sql.init.mode&#x3D;always</p>
<p>spring.sql.init.mode&#x3D;UTF-8 </p>
</blockquote>
<h2 id="Springä¸­ç¼–è¯‘å¼‚å¸¸å¯¼è‡´äº‹åŠ¡å›æ»šå¤±æ•ˆé—®é¢˜"><a href="#Springä¸­ç¼–è¯‘å¼‚å¸¸å¯¼è‡´äº‹åŠ¡å›æ»šå¤±æ•ˆé—®é¢˜" class="headerlink" title="Springä¸­ç¼–è¯‘å¼‚å¸¸å¯¼è‡´äº‹åŠ¡å›æ»šå¤±æ•ˆé—®é¢˜"></a>Springä¸­ç¼–è¯‘å¼‚å¸¸å¯¼è‡´äº‹åŠ¡å›æ»šå¤±æ•ˆé—®é¢˜</h2><p>ä¸ºä»€ä¹ˆå½“æˆ‘ä»¬ç”¨@Transactionalæ³¨è§£æ¥è¿›è¡Œäº‹åŠ¡çš„ç®¡ç†çš„æ—¶å€™,å¦‚æœå‡ºç°ç¼–è¯‘æ—¶å¼‚å¸¸,å‘ç°äº‹åŠ¡è¿˜æ˜¯æäº¤äº†,æ²¡æœ‰å›æ»š?</p>
<ul>
<li><p>åŸå› :</p>
<p>â€“&gt; springé»˜è®¤åªæœ‰æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸(å³RuntimExceptionåŠå­ç±»)æˆ–ErroråŠå­ç±»æ—¶,æ‰å›å›æ»šäº‹åŠ¡</p>
<p>â€“&gt; å¦‚æœæŠ›å‡ºçš„æ˜¯å…¶ä»–ç¼–è¯‘æ—¶æœŸå¼‚å¸¸,åˆ™ä»ä¼šæäº¤äº‹åŠ¡</p>
<blockquote>
<p>è§£å†³æ–¹æ³•:é…ç½®@Transaction(rollbackFor &#x3D; xxxException.class)</p>
</blockquote>
</li>
</ul>
<h1 id="Springæ•æ‰å¼‚å¸¸å¯¼è‡´çš„å›æ»šå¤±æ•ˆé—®é¢˜"><a href="#Springæ•æ‰å¼‚å¸¸å¯¼è‡´çš„å›æ»šå¤±æ•ˆé—®é¢˜" class="headerlink" title="Springæ•æ‰å¼‚å¸¸å¯¼è‡´çš„å›æ»šå¤±æ•ˆé—®é¢˜"></a>Springæ•æ‰å¼‚å¸¸å¯¼è‡´çš„å›æ»šå¤±æ•ˆé—®é¢˜</h1><ul>
<li><p>åŸå› :</p>
<p>â€“&gt;äº‹åŠ¡æäº¤,å›æ»š,éƒ½æ˜¯ä»£ç†å¯¹è±¡è°ƒç”¨äº‹åŠ¡é€šçŸ¥æ¥å®Œæˆçš„,å¦‚æœä»£ç†å¯¹è±¡ä¸çŸ¥é“å‡ºç°äº†å¼‚å¸¸,ä¹Ÿå°±æ²¡æœ‰æœºä¼šæ‰§è¡Œå›æ»šæ“ä½œ</p>
<p>â€“&gt;è‡ªå·±try-catchå¼‚å¸¸,æ„å‘³ç€ä»£ç†å¯¹è±¡è®¤ä¸º[æ²¡æœ‰å‘ç”Ÿå¼‚å¸¸],å› æ­¤ä¹Ÿä¼šæäº¤äº‹åŠ¡</p>
<blockquote>
<p>è§£å†³æ–¹æ³•:ä¸šåŠ¡æ–¹æ³•å†…ä¸è¦æ•è·å¼‚å¸¸,æˆ–è€…å°†æ•è·çš„å¼‚å¸¸é‡æ–°æŠ›å‡º</p>
</blockquote>
<h1 id="Transactional-Propagation-äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º"><a href="#Transactional-Propagation-äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º" class="headerlink" title="@Transactional(Propagation)äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º"></a>@Transactional(Propagation)äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º</h1><ul>
<li>å½“æˆ‘ä»¬ä½¿ç”¨@Transactionalå¼€å¯äº‹åŠ¡çš„æ—¶å€™,å¦‚æœäº‹åŠ¡å†…éƒ¨éœ€è¦è°ƒç”¨å¦ä¸€ä¸ªäº‹åŠ¡,é‚£ä¹ˆä»–ä»¬ç”¨çš„æ˜¯åŒä¸€ä¸ªäº‹åŠ¡å—?</li>
</ul>
<blockquote>
<p>å¦‚æœæ²¡æœ‰è®¾ç½®å‚æ•°,åˆ™é»˜è®¤æ˜¯ä½¿ç”¨åŒä¸€ä¸ªäº‹åŠ¡,åˆ™ä¸€æ¬¡äº‹åŠ¡åˆ›å»º(create new transaction),ä¸€æ¬¡äº‹åŠ¡æäº¤(commit)</p>
<ul>
<li>é»˜è®¤å‚æ•°ä¸º:</li>
</ul>
<p>@Transactional(propagation &#x3D; propagation.REQUIRED)   æœ‰åˆ™åŠ å…¥,æ— åˆ™åˆ›å»º</p>
<ul>
<li>å¦‚æœæ— è®ºå¦‚ä½•éƒ½æƒ³å¼€å¯æ–°äº‹åŠ¡,è¿™æ˜¯ç”¨ä»¥ä¸‹å‚æ•°:</li>
</ul>
<p>@Transactional(propagation &#x3D; propagation.REQUIRES_NEW) æ€»æ˜¯éœ€è¦ä¸€ä¸ªæ–°äº‹ç‰© </p>
</blockquote>
<h1 id="Transactionaläº‹åŠ¡ä¼ æ’­è¡Œä¸ºå¤±æ•ˆ"><a href="#Transactionaläº‹åŠ¡ä¼ æ’­è¡Œä¸ºå¤±æ•ˆ" class="headerlink" title="@Transactionaläº‹åŠ¡ä¼ æ’­è¡Œä¸ºå¤±æ•ˆ"></a>@Transactionaläº‹åŠ¡ä¼ æ’­è¡Œä¸ºå¤±æ•ˆ</h1><blockquote>
<p>äº‹åŠ¡ä¼ æ’­è¡Œä¸ºå¤±æ•ˆæ˜¯ä¸ºåœ¨åŒä¸€ä¸ªç±»ä¸­,ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•è°ƒå¦ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•,æ­¤æ—¶è¢«è°ƒç”¨çš„æ–¹æ³•å®é™…ä¸Šæ˜¯thisæ‰§è¡Œçš„,ä¸æ˜¯springæ³¨å…¥çš„ä»£ç†å¯¹è±¡,@Transactionalåº•å±‚æ˜¯ç”±springåˆ›å»ºçš„ä»£ç†å¯¹è±¡è°ƒç”¨çš„AOPé€šçŸ¥æ‰§è¡Œçš„äº‹åŠ¡é€»è¾‘,å¦‚æœæ˜¯this.æ–¹æ³•åå°±ä¸æ˜¯ä»£ç†å¯¹è±¡è°ƒç”¨äº†,è€Œæ˜¯è¢«ä»£ç†å¯¹è±¡è‡ªå·±è°ƒç”¨è‡ªå·±æ–¹æ³•,æ‰€ä»¥è¢«è°ƒç”¨@Transactionäº‹åŠ¡æ³¨è§£ä¹Ÿå°±ä¸ä¼šç”Ÿæ•ˆäº†.</p>
</blockquote>
<blockquote>
<p>è§£å†³æ–¹æ³•:åº•å±‚åŸå› è·Ÿå¾ªç¯ä¾èµ–ä¸€æ ·,åªéœ€è¦åœ¨é…ç½®æ–‡ä»¶é…ç½®:main.allow.circular&#x3D;reference&#x3D;trueå³å¯</p>
<p>æ³¨æ„:spring2.6.0ä¹‹å‰çš„ç‰ˆæœ¬ä¸éœ€è¦é…ç½®,æœ‰springè‡ªåŠ¨å¤„ç†</p>
</blockquote>
<h1 id="å¾ªç¯ä¾èµ–é—®é¢˜"><a href="#å¾ªç¯ä¾èµ–é—®é¢˜" class="headerlink" title="å¾ªç¯ä¾èµ–é—®é¢˜"></a>å¾ªç¯ä¾èµ–é—®é¢˜</h1><blockquote>
<p>Spring2.6.0ä¹‹å‰çš„ç‰ˆæœ¬ä¼šè‡ªåŠ¨è§£å†³</p>
</blockquote>
<blockquote>
<p>spring2.6.0åŠåç‰ˆæœ¬éœ€è¦åœ¨é…ç½®æ–‡ä»¶å¼€å¯:main.allow.circular&#x3D;reference&#x3D;true</p>
</blockquote>
<h1 id="åŸå­æ€§ä¸é”å¤±æ•ˆ"><a href="#åŸå­æ€§ä¸é”å¤±æ•ˆ" class="headerlink" title="åŸå­æ€§ä¸é”å¤±æ•ˆ"></a>åŸå­æ€§ä¸é”å¤±æ•ˆ</h1><p>å½“æˆ‘ä»¬å¼€å¯ä¸€ä¸ªäº‹åŠ¡çš„æ—¶å€™,è¿™ä¸ªæ—¶å€™å¦‚æœæœ‰å¤šä¸ªç”¨æˆ·æƒ³é€šè¿‡äº‹åŠ¡æ¥æ“ä½œæ•°æ®åº“,æˆ‘ä»¬çš„æ•°æ®åº“ä¸ä¸Šé”æ˜¯éå¸¸å±é™©çš„,ä¼šäº§ç”Ÿçº¿ç¨‹å®‰å…¨é—®é¢˜,è¿™ä¸ªæ—¶å€™æˆ‘ä»¬åº”è¯¥æƒ³åˆ°ä¸Šé”,ä½†æ˜¯ä¸Šé”å°±èƒ½è§£å†³é—®é¢˜å—?</p>
<blockquote>
<p>ç­”æ¡ˆæ˜¯ä¸ä¸€å®š,è¿™ä¸ªå¾—å–å†³äºé”çš„ä½ç½®,å¦‚æœä¸Šé”çš„ä½ç½®åœ¨@Transactionalä¸‹çš„æ–¹æ³•å£°æ˜ä¸Š,é‚£ä¹ˆæ­¤é”ä¼šå¤±æ•ˆ,åº”ä¸ºæˆ‘ä»¬åœ¨ä½¿ç”¨@Transactionalåˆ›å»ºäº‹åŠ¡çš„æ—¶å€™æ˜¯é€šè¿‡é€šçŸ¥+åˆ‡ç‚¹+é€šçŸ¥çš„æ–¹å¼æ¥å®ç°çš„,å¦‚æœåœ¨æ–¹æ³•å£°æ˜ä¸Šä¸Šé”çš„è¯,é‚£ä¹ˆæœ‰å¯èƒ½å½“ä¸€ä¸ªå®¢æˆ·ç«¯èµ°å®Œè¿™ä¸ªæ–¹æ³•çš„æ—¶å€™,è¿™ä¸ªé”ä¼šæ‰“å¼€,ç„¶ååœ¨æäº¤äº‹åŠ¡ä¹‹å‰(ä¹Ÿå°±æ˜¯åç½®é€šçŸ¥æ‰§è¡Œå‰)æœ‰å¯èƒ½ä¼šè®©å¦ä¸€ä¸ªç”¨æˆ·è¿›å…¥åˆ°æ–¹æ³•å†…éƒ¨å†æ¬¡æ‰§è¡Œä¸€éäº‹åŠ¡æµç¨‹,ç„¶åä¸¤ä¸ªå®¢æˆ·ç«¯åŒæ—¶æäº¤,è¿™ä¸ªæ—¶å€™å°±ä¼šäº§ç”Ÿçº¿ç¨‹å®‰å…¨é—®é¢˜,ä¹Ÿå°±æ˜¯å¹¶å‘ä¿®æ”¹å¼‚å¸¸çš„ç°è±¡,é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å¦‚ä½•è§£å†³é”å¤±æ•ˆçš„é—®é¢˜å‘¢?</p>
<ul>
<li><p>æ–¹å¼ä¸€:å¯ä»¥å°†é”ä¸Šåœ¨æ•´ä¸ªäº‹åŠ¡ä»£ç çš„å¤–é¢,ä¹Ÿå°±æ˜¯å½“serveciå±‚çš„æ–¹æ³•å†…éƒ¨è°ƒç”¨çš„æ—¶å€™,å°†æ•´ä¸ªè°ƒç”¨è¿‡ç¨‹å‰é¢ä¸Šé”,å°±å¯ä»¥å°†,äº‹åŠ¡ä»£ç å’Œä¸šåŠ¡ä»£ç ä¸€èµ·åŒ…å«åœ¨å†…äº†.</p>
</li>
<li><p>æ–¹å¼äºŒ:å¯ä»¥åœ¨sqlæŸ¥è¯¢è¯­å¥åé¢åŠ ä¸€ä¸ªfor update(æ’ä»–é”)è¯­å¥,åŠ ä¸Šäº†æ­¤è¯­å¥ä¹‹å,åªè¦å½“å‰å®¢æˆ·ç«¯ä¸æäº¤äº‹åŠ¡,å…¶ä»–å®¢æˆ·ç«¯å°±æ— æ³•è®¿é—®å½“å‰å®¢æˆ·ç«¯æ­£åœ¨æ“ä½œçš„ä¿¡æ¯,ä¼šé”åœ¨åŸåœ°ç­‰å¾…å½“å‰ç”¨æˆ·æäº¤äº‹åŠ¡åæ‰èƒ½è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ,è¿™ä¸ªé”ä¹Ÿå«åšæ‚²è§‚é”.</p>
</li>
</ul>
</blockquote>
</li>
</ul>
<h1 id="ä»€ä¹ˆæ˜¯IOCï¼Ÿä»€ä¹ˆæ˜¯DIï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯IOCï¼Ÿä»€ä¹ˆæ˜¯DIï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯IOCï¼Ÿä»€ä¹ˆæ˜¯DIï¼Ÿ"></a>ä»€ä¹ˆæ˜¯IOCï¼Ÿä»€ä¹ˆæ˜¯DIï¼Ÿ</h1><blockquote>
<p>IOCï¼šæ§åˆ¶åè½¬ï¼Œå°†Beanå¯¹è±¡çš„åˆ›å»ºæƒäº¤ç»™Springï¼Œè€Œåä»Springå®¹å™¨ä¸­è·å–Beanå¯¹è±¡æ¥ä½¿ç”¨</p>
</blockquote>
<blockquote>
<p> DIï¼šä¾èµ–æ³¨å…¥ï¼Œç»™Beançš„å±æ€§èµ‹å€¼</p>
</blockquote>
<h1 id="è¯·æŒ‡å®šä»€ä¹ˆæ˜¯é€šçŸ¥ã€è¿æ¥ç‚¹ã€åˆ‡ç‚¹ã€åˆ‡é¢ï¼Ÿ"><a href="#è¯·æŒ‡å®šä»€ä¹ˆæ˜¯é€šçŸ¥ã€è¿æ¥ç‚¹ã€åˆ‡ç‚¹ã€åˆ‡é¢ï¼Ÿ" class="headerlink" title="è¯·æŒ‡å®šä»€ä¹ˆæ˜¯é€šçŸ¥ã€è¿æ¥ç‚¹ã€åˆ‡ç‚¹ã€åˆ‡é¢ï¼Ÿ"></a>è¯·æŒ‡å®šä»€ä¹ˆæ˜¯é€šçŸ¥ã€è¿æ¥ç‚¹ã€åˆ‡ç‚¹ã€åˆ‡é¢ï¼Ÿ</h1><blockquote>
<p> é€šçŸ¥ï¼šæŠ½å–çš„ç›¸åŒä¸šåŠ¡é€»è¾‘çš„ä»£ç ï¼Œç”¨æ¥å¢å¼ºç›®æ ‡æ–¹æ³•</p>
<p>è¿æ¥ç‚¹ï¼šç›®æ ‡å¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•å‡ä¸ºè¿æ¥ç‚¹</p>
<p>åˆ‡ç‚¹ï¼šç›®æ ‡å¯¹è±¡éœ€è¦å¢å¼ºçš„æ–¹æ³•ä¸ºåˆ‡ç‚¹</p>
<p>åˆ‡é¢ï¼šé€šçŸ¥åŠ åˆ‡ç‚¹</p>
</blockquote>
<h1 id="Springæ•´åˆMyBatisæµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Springæ•´åˆMyBatisæµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Springæ•´åˆMyBatisæµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Springæ•´åˆMyBatisæµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ</h1><blockquote>
<p>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºSpringBootå·¥å…·ï¼Œpom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–</p>
</blockquote>
<blockquote>
<p>ç¬¬äºŒéƒ¨ï¼šåœ¨applicationâ€¦é…ç½®æ–‡ä»¶ä¸­é…ç½®è¿æ¥å‚æ•°</p>
</blockquote>
<blockquote>
<p>ç¬¬ä¸‰éƒ¨ï¼šå®šä¹‰Mapperæ¥å£ï¼Œåœ¨æ¥å£ä¸Šä½¿ç”¨@Mapperæ³¨è§£</p>
</blockquote>
<h1 id="é…ç½®ç±»è¯»å–æ•°æ®é”™è¯¯é—®é¢˜"><a href="#é…ç½®ç±»è¯»å–æ•°æ®é”™è¯¯é—®é¢˜" class="headerlink" title="é…ç½®ç±»è¯»å–æ•°æ®é”™è¯¯é—®é¢˜"></a>é…ç½®ç±»è¯»å–æ•°æ®é”™è¯¯é—®é¢˜</h1><p>å½“æˆ‘ä»¬ç”¨@Configrationå®šä¹‰é…ç½®ç±»æ—¶,æœ‰æ—¶å€™ä»é…ç½®æ–‡ä»¶è¯»å–çš„æ•°æ®ä¸æˆ‘ä»¬è®¾ç½®çš„æ•°æ®ä¸ä¸ç¬¦æ˜¯ä¸ºä»€ä¹ˆå‘¢?</p>
<p>å› ä¸ºspringåº•å±‚é»˜è®¤å…ˆè¯»å–ç³»ç»Ÿé…ç½®æ–‡ä»¶,å¦‚æœä½ å®šä¹‰çš„é…ç½®åä¸ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸€æ ·,é‚£ä¹ˆæœ‰å¯èƒ½ä¼šè¯»å–åˆ°ç³»ç»Ÿçš„å†…å®¹..</p>
<h1 id="ä»€ä¹ˆæ—¶å€™ä¼šé€šçŸ¥å¤±æ•ˆ"><a href="#ä»€ä¹ˆæ—¶å€™ä¼šé€šçŸ¥å¤±æ•ˆ" class="headerlink" title="ä»€ä¹ˆæ—¶å€™ä¼šé€šçŸ¥å¤±æ•ˆ"></a>ä»€ä¹ˆæ—¶å€™ä¼šé€šçŸ¥å¤±æ•ˆ</h1><p>æ²¡æœ‰ç»è¿‡ä»£ç†è°ƒç”¨æ–¹æ³•å°±ä¼šå¤±æ•ˆ,ä½¿ç”¨@autowiredæ³¨å…¥ä¸€ä¸ªä»£ç†å¯¹è±¡æ¥è°ƒç”¨å°±å¯ä»¥äº†(å¾ªç¯ä¾èµ–)</p>
<h1 id="æ¥å£WebMvcConfigurerçš„ä½œç”¨åŠå¸¸ç”¨çš„2ä¸ªæ–¹æ³•"><a href="#æ¥å£WebMvcConfigurerçš„ä½œç”¨åŠå¸¸ç”¨çš„2ä¸ªæ–¹æ³•" class="headerlink" title="æ¥å£WebMvcConfigurerçš„ä½œç”¨åŠå¸¸ç”¨çš„2ä¸ªæ–¹æ³•"></a>æ¥å£WebMvcConfigurerçš„ä½œç”¨åŠå¸¸ç”¨çš„2ä¸ªæ–¹æ³•</h1><ul>
<li><p>WebMvcConfigureré…ç½®ç±»å…¶å®æ˜¯Springå†…éƒ¨çš„ä¸€ç§é…ç½®æ–¹å¼ï¼Œé‡‡ç”¨JavaBeançš„å½¢å¼æ¥ä»£æ›¿ä¼ ç»Ÿçš„xmlé…ç½®æ–‡ä»¶å½¢å¼è¿›è¡Œé’ˆå¯¹æ¡†æ¶ä¸ªæ€§åŒ–å®šåˆ¶ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸€äº›Handlerï¼ŒInterceptorï¼ŒViewResolverï¼ŒMessageConverter</p>
<blockquote>
<p>1.1 addInterceptorsï¼šæ‹¦æˆªå™¨</p>
<p>addInterceptorï¼šéœ€è¦ä¸€ä¸ªå®ç°HandlerInterceptoræ¥å£çš„æ‹¦æˆªå™¨å®ä¾‹<br>addPathPatternsï¼šç”¨äºè®¾ç½®æ‹¦æˆªå™¨çš„è¿‡æ»¤è·¯å¾„è§„åˆ™ï¼›addPathPatterns(â€œ&#x2F;**â€)å¯¹æ‰€æœ‰è¯·æ±‚éƒ½æ‹¦æˆª<br>excludePathPatternsï¼šç”¨äºè®¾ç½®ä¸éœ€è¦æ‹¦æˆªçš„è¿‡æ»¤è§„åˆ™<br>æ‹¦æˆªå™¨ä¸»è¦ç”¨é€”ï¼šè¿›è¡Œç”¨æˆ·ç™»å½•çŠ¶æ€çš„æ‹¦æˆªï¼Œæ—¥å¿—çš„æ‹¦æˆªç­‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.addInterceptors(registry);</span><br><span class="line">    registry.addInterceptor(<span class="keyword">new</span> <span class="title class_">TestInterceptor</span>()).addPathPatterns(<span class="string">&quot;/**&quot;</span>).excludePathPatterns(<span class="string">&quot;/emp/toLogin&quot;</span>,<span class="string">&quot;/emp/login&quot;</span>,<span class="string">&quot;/js/**&quot;</span>,<span class="string">&quot;/css/**&quot;</span>,<span class="string">&quot;/images/**&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>2.3 addResourceHandlersï¼šé™æ€èµ„æº</p>
<p>æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³è‡ªå®šä¹‰é™æ€èµ„æºæ˜ å°„ç›®å½•çš„è¯ï¼Œåªéœ€é‡å†™addResourceHandlersæ–¹æ³•å³å¯ã€‚<br>æ³¨ï¼šå¦‚æœç»§æ‰¿WebMvcConfigurationSupportç±»å®ç°é…ç½®æ—¶å¿…é¡»è¦é‡å†™è¯¥æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyWebMvcConfigurerAdapter</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®é™æ€è®¿é—®èµ„æº</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> registry</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/my/**&quot;</span>).addResourceLocations(<span class="string">&quot;classpath:/my/&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>addResoureHandlerï¼šæŒ‡çš„æ˜¯å¯¹å¤–æš´éœ²çš„è®¿é—®è·¯å¾„<br>addResourceLocationsï¼šæŒ‡çš„æ˜¯å†…éƒ¨æ–‡ä»¶æ”¾ç½®çš„ç›®å½•</p>
</blockquote>
</li>
</ul>

                
            </div>
        </article>
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2022/04/04/%E7%BD%91%E9%A1%B5%E5%92%8CTomcat%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B9%8B%E9%97%B4%E5%AD%97%E7%AC%A6%E9%9B%86%E4%B9%B1%E7%A0%81%E7%9A%84%E9%97%AE%E9%A2%98%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3/">æµè§ˆå™¨å’ŒTomcatæœåŠ¡å™¨ä¹‹é—´å­—ç¬¦é›†ä¹±ç çš„é—®é¢˜æ€ä¹ˆè§£å†³?</a>
            </div>
            <p class="sub">Apr 04 2022</p>
            <div class="post-content">
                
                    <p>é¦–å…ˆè¯´æ˜ä¸€ä¸‹:</p>
<p>ç½‘é¡µçš„ç¼–ç å’Œè§£ç é»˜è®¤éƒ½æ˜¯å­—ç¬¦é›†é‡‡ç”¨çš„æ˜¯-&gt; GBK</p>
<p>Tomcatçš„ç¼–ç å’Œè§£ç é»˜è®¤éƒ½æ˜¯ä½¿ç”¨é‡‡ç”¨-&gt; ISO-8859-1</p>
<p>  ä½†æ˜¯å½“æˆ‘ä»¬é‡‡ç”¨htmlç¼–å†™ç½‘é¡µæ—¶,ä¸ºäº†å±•ç¤ºä¸­æ–‡æ•°æ®,ä¸€èˆ¬ä¼šå…ˆå°†ç½‘é¡µçš„ç¼–ç æ ¼å¼è®¾ç½®ä¸ºUTF-8,è¿™ä¸ªæ—¶å€™ç½‘é¡µçš„ç¼–ç æ ¼å¼å°±æ˜¯UTF-8äº†.</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qqQ9yR"><img src="https://s1.ax1x.com/2022/04/04/qqQ9yR.png" alt="qqQ9yR.png" border="0" /></a></p>
<p>  è¿™ä¸ªæ—¶å€™å½“æˆ‘ä»¬ä½¿ç”¨Tomcatçš„Requestæ¥å—ä¸­æ–‡æ•°æ®çš„æ—¶å€™,å› ä¸ºæµè§ˆå™¨é‡‡ç”¨UTF-8ç¼–ç ,ç„¶è€Œtomcatæ‰ç”¨çš„æ˜¯ISO-8859-1è§£ç ,å­—ç¬¦é›†ä¸ä¸€è‡´,æ‰€ä»¥ä¼šå¯¼è‡´ä¹±ç é—®é¢˜.</p>
<p>è§£å†³æ–¹å¼åˆ†ä¸¤ç§æƒ…å†µ:GETè¯·æ±‚å’ŒPOSTè¯·æ±‚(GETè¯·æ±‚è¯·æ±‚å‚æ•°åœ¨è¯·æ±‚è¡Œ,POSTè¯·æ±‚è¯·æ±‚å‚æ•°åœ¨è¯·æ±‚ä½“,æ‰€ä»¥æ–¹æ³•ä¸åŒ)</p>
<h2 id="Requestè¯·æ±‚å‚æ•°å‚æ•°ä¸­æ–‡ä¹±ç å¤„ç†-gt-POSTè¯·æ±‚"><a href="#Requestè¯·æ±‚å‚æ•°å‚æ•°ä¸­æ–‡ä¹±ç å¤„ç†-gt-POSTè¯·æ±‚" class="headerlink" title="Requestè¯·æ±‚å‚æ•°å‚æ•°ä¸­æ–‡ä¹±ç å¤„ç†-&gt;POSTè¯·æ±‚:"></a>Requestè¯·æ±‚å‚æ•°å‚æ•°ä¸­æ–‡ä¹±ç å¤„ç†-&gt;POSTè¯·æ±‚:</h2><p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qqQtpQ"><img src="https://s1.ax1x.com/2022/04/04/qqQtpQ.png" alt="qqQtpQ.png" border="0" /></a></p>
<p>è§£å†³æ–¹æ¡ˆ:</p>
<p>è®¾ç½®è¾“å…¥æµç¼–ç :UTF-8</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="Requestè¯·æ±‚å‚æ•°å‚æ•°ä¸­æ–‡ä¹±ç å¤„ç†-gt-GETè¯·æ±‚"><a href="#Requestè¯·æ±‚å‚æ•°å‚æ•°ä¸­æ–‡ä¹±ç å¤„ç†-gt-GETè¯·æ±‚" class="headerlink" title="Requestè¯·æ±‚å‚æ•°å‚æ•°ä¸­æ–‡ä¹±ç å¤„ç†-&gt;GETè¯·æ±‚:"></a>Requestè¯·æ±‚å‚æ•°å‚æ•°ä¸­æ–‡ä¹±ç å¤„ç†-&gt;GETè¯·æ±‚:</h1><p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qqQ2c9"><img src="https://s1.ax1x.com/2022/04/04/qqQ2c9.png" alt="qqQ2c9.png" border="0" /></a></p>
<p>ps.å¦‚æœä½¿ç”¨çš„æ˜¯Tomcat8ä»¥åŠä»¥åçš„ç‰ˆæœ¬,GETè¯·æ±‚ä¸­æ–‡ä¸ä¼šå‡ºç°ä¹±ç é—®é¢˜</p>
<p>è§£å†³åŠæ³•1ï¼šé’ˆå¯¹ä½¿ç”¨tomcat7åŠä»¥å‰ç‰ˆæœ¬çš„tomcat</p>
<p>å¯¹ä¹±ç çš„å­—ç¬¦å…ˆä½¿ç”¨ISO-8859-1ç¼–ç ï¼Œå†æŒ‰ç…§UTF-8è§£ç å³å¯æ¢å¤åŸå§‹æ•°æ®ã€‚å¯ä½¿ç”¨jdkæä¾›çš„URLEncoderã€URLDecoderæˆ–è€…Stringç±»å®Œæˆ</p>
<p>ç¼–ç (URLEncoder):</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String s=URLEncoder.encode(username, <span class="string">&quot;ISO-8859-1&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>è§£ç (URLDecoder):</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username=URLDecoder.decode(s, <span class="string">&quot;utf-8&quot;</span>);</span><br></pre></td></tr></table></figure>

<hr>
<p>ç¼–ç (String):</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">byte</span>[] bytes=username.getBytes (<span class="string">&quot;ISO-8859-1&quot;</span>))</span><br></pre></td></tr></table></figure>

<p>è§£ç (String):</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username=<span class="keyword">new</span> <span class="title class_">String</span>(bytes,<span class="string">&quot;UTF-8&quot;</span>);</span><br></pre></td></tr></table></figure>



<p>è§£å†³åŠæ³•2ï¼šé…ç½®æ–¹å¼è§£å†³tomcat7 GETè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ã€æ¨èä½¿ç”¨ã€‘</p>
<p>maven tomcat7 æ’ä»¶é…ç½®:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qqQH9e"><img src="https://s1.ax1x.com/2022/04/04/qqQH9e.png" alt="qqQH9e.png" border="0" style="zoom: 50%;" /></a></p>
<p>æœ¬åœ° tomcat7 é…ç½®: conf&#x2F;server.xml</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qqQLjA"><img src="https://s1.ax1x.com/2022/04/04/qqQLjA.png" alt="qqQLjA.png" border="0" style="zoom: 50%;" /></a></p>
<h1 id="Responseå“åº”æ•°æ®ä¸­æ–‡ä¹±ç å¤„ç†"><a href="#Responseå“åº”æ•°æ®ä¸­æ–‡ä¹±ç å¤„ç†" class="headerlink" title="Responseå“åº”æ•°æ®ä¸­æ–‡ä¹±ç å¤„ç†:"></a>Responseå“åº”æ•°æ®ä¸­æ–‡ä¹±ç å¤„ç†:</h1><p>â€‹    å½“æˆ‘ä»¬è¯•å›¾ä½¿ç”¨Responseç›´æ¥å¯¹æµè§ˆå™¨å“åº”ä¸­æ–‡æ•°æ®æ—¶,ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿä¹±ç é—®é¢˜?</p>
<p>â€‹    å› ä¸ºæ­¤æ—¶TomcatæœåŠ¡å™¨çš„Responseå¯¹è±¡çš„é»˜è®¤ç¼–ç æ˜¯ISO-8859-1,è€Œæµè§ˆå™¨çš„è§£ç æ–¹å¼ä»ç„¶æ˜¯GBK,æ‰€ä»¥å½“æˆ‘ä»¬å°†ä¸­æ–‡æ•°æ®å“åº”åˆ°é¡µé¢ä¸Šæ—¶å…¶å®æ˜¯,Responseå¯¹ä¸­æ–‡æ•°æ®ç”¨äº†ISO-8859-1çš„å­—ç¬¦é›†ç¼–ç ,è€Œå“åº”åˆ°æµè§ˆå™¨é‚£è¾¹,æµè§ˆå™¨ç¡®æ˜¯ç”¨çš„GBKæ¥è§£ç ,å­—ç¬¦é›†ä¸ä¸€è‡´,æ‰€ä»¥å¯¼è‡´ä¹±ç </p>
<p>â€‹    é‚£ä¹ˆæˆ‘ä»¬èƒ½ä¸èƒ½åƒå¤„ç†Requesté‚£æ ·çš„æ–¹å¼æ¥å¤„ç†Responseå“åº”ä¹±ç çš„é—®é¢˜å‘¢?</p>
<p>â€‹    å…¶å®æ˜¯å¯ä»¥çš„,æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®Responseçš„å“åº”è¾“å‡ºæµçš„ç¼–ç ä¸ºGBK,ä¸æµè§ˆå™¨å­—ç¬¦é›†ä¿æŒä¸€è‡´å°±å¯ä»¥äº†,æ–¹å¼å¦‚ä¸‹:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.setCharacterEncoding(<span class="string">&quot;GBK&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>â€‹    ä½†æ˜¯æ­¤æ–¹æ³•å¹¶ä¸æ¨è,å› ä¸ºæˆ‘ä»¬åœ¨å¤„ç†è¯·æ±‚å‚æ•°æ—¶ç”¨çš„æ˜¯UTF-8,ä¸ºäº†ä¿æŒè¯·æ±‚å’Œå“åº”ä¸€è‡´,æˆ‘ä»¬åº”è¯¥ä¹ŸåŒæ ·è®¾ç½®å“åº”è¾“å‡ºæµçš„å­—ç¬¦é›†ä¸ºUTF-8,ä½†æ˜¯å½“æˆ‘ä»¬è®¾ç½®äº†Responseçš„è¾“å‡ºæµå­—ç¬¦é›†ä¸ºUTF-8æ—¶,ä¸æµè§ˆå™¨çš„GBKè§£ç æ–¹å¼åˆå†ä¸€æ¬¡å¯¹åº”ä¸ä¸Šäº†,é‚£ä¹ˆæˆ‘ä»¬æœ‰æ²¡æœ‰åŠæ³•èƒ½å¤Ÿåœ¨è®¾ç½®Responseå­—ç¬¦é›†çš„æ—¶å€™åŒæ—¶å‘Šè¯‰æµè§ˆå™¨ä½¿ç”¨åŒæ ·çš„å­—ç¬¦é›†è§£ç å—?ç­”æ¡ˆæ˜¯æœ‰çš„,è®¾ç½®å“åº”å¤´å‚æ•°å³å¯,è§£å†³æ–¹å¼å¦‚ä¸‹:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qqQzAf"><img src="https://s1.ax1x.com/2022/04/04/qqQzAf.png" alt="qqQzAf.png" border="0" style="zoom: 67%;" /></a></p>
<p>æ­¤æ—¶,æˆ‘ä»¬çš„æœåŠ¡å™¨å’Œæµè§ˆå™¨ä¹‹é—´ä¸ç®¡æ˜¯è¯·æ±‚è¿˜æ˜¯å“åº”éƒ½æ˜¯ä»¥UTF-8çš„æ–¹å¼å¤„ç†äº†,å®Œç¾è§£å†³äº†ä¹±ç çš„é—®é¢˜!</p>

                
            </div>
        </article>
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2022/04/03/Mybatis%E4%B8%AD%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%A4%9A%E5%AF%B9%E4%B8%80%E5%88%86%E6%AD%A5%E6%9F%A5%E8%AF%A2%E7%9A%84?/">Mybatisä¸­æ˜¯å¦‚ä½•å®ç°å¤šå¯¹ä¸€åˆ†æ­¥æŸ¥è¯¢çš„?</a>
            </div>
            <p class="sub">Apr 03 2022</p>
            <div class="post-content">
                
                    <p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qHYoKH"><img src="https://s1.ax1x.com/2022/04/03/qHYoKH.png" alt="qHYoKH.png" border="0" /></a></p>

                
            </div>
        </article>
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2022/04/03/%E8%BF%99%E6%98%AF%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/">è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢</a>
            </div>
            <p class="sub">Apr 03 2022</p>
            <div class="post-content">
                
                    <p>è®°å½•ä¸€ä¸‹:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qHd7NR"><img src="https://s1.ax1x.com/2022/04/03/qHd7NR.png" alt="qHd7NR.png" border="0" /></a> </p>

                
            </div>
        </article>
    
        <article class="post article-entry">
            <div class="post-title">
                <a class="post-title-link text-underline" href="/2022/04/03/hello-world/">Hello World</a>
            </div>
            <p class="sub">Apr 03 2022</p>
            <div class="post-content">
                
                    <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

                
            </div>
        </article>
    
</div>
<div class="side-bar">


    <div class="avator" id="avator">
    <div class="title">
        <a href="#" class="text-underline">è¿™æ˜¯çˆ·</a>
    </div>
        <img src="WechatIMG68.jpeg" class="ava-img">
        <h3 class="author">å¼ é¸£æ˜Š</h3>
        <div class="icon-list">
        <a href="yourweibo"><i class="iconfont icon-weibo icon-item"></i></a>
        <a href="mailto:youremail"><i class="iconfont icon-email icon-item"></i></a>
        <a href="yourgithub"><i class="iconfont icon-github icon-item"></i></a>
        <a href="yourlinkedin"><i class="iconfont icon-linkedin icon-item"></i></a>
        </div>
    <div class="tags">
    <h3 class="tags-title">Tags</h3>
    <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Quiet/" rel="tag">Quiet</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%BB%E9%A2%98/" rel="tag">ä¸»é¢˜</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%99%E6%80%81%E4%B8%BB%E9%A2%98/" rel="tag">é™æ€ä¸»é¢˜</a><span class="tag-list-count">1</span></li></ul>
</div>
    </div>
</div>


</section>

    <nav class="page-nav">
    
        <a class="prev" href="/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text">Prev</span>
        </a>
    
    
        <a class="next" href="/page/3/">
            <span class="next-text">Next</span>
            <i class="iconfont icon-right"></i>
        </a>
    
    </nav>



            </main>
            <div class="copyright">
  <div class="text">Powered By
    <a target="_blank" rel="noopener" href="https://hexo.io/">Zmhaoo</a> | Theme <a target="_blank" rel="noopener" href="https://github.com/zjx137/hexo-theme-Tsu">Tsu</a> &copy 2019
  </div>
</div>

        </div>
    <div class="back-to-top" id="back-to-top">
            <i class="iconfont icon-up"></i>
    </div>
        
    </body>
    
<script src="/js/jquery-3.3.1.min.js"></script>

    
<script src="/js/back-to-top.js"></script>

    
<script src="/js/scroll.js"></script>

    <!-- MathJaxé…ç½®ï¼Œå¯é€šè¿‡å•ç¾å…ƒç¬¦å·ä¹¦å†™è¡Œå†…å…¬å¼ç­‰ -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": { 
        preferredFont: "TeX", 
        availableFonts: ["STIX","TeX"], 
        linebreaks: { automatic:true }, 
        EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) 
    },
    tex2jax: { 
        inlineMath: [ ["$", "$"], ["\\(","\\)"] ], 
        processEscapes: true, 
        ignoreClass: "tex2jax_ignore|dno",
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {  
        equationNumbers: { autoNumber: "AMS" },
        noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } }, 
        Macros: { href: "{}" } 
    },
    messageStyle: "none"
    }); 
</script>
<!-- ç»™MathJaxå…ƒç´ æ·»åŠ has-jax class -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<!-- é€šè¿‡è¿æ¥CDNåŠ è½½MathJaxçš„jsä»£ç  -->
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

</html>
